(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/searchForm/searchForm"],{"618d":function(t,e,a){"use strict";a.r(e);var n=a("6938"),s=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=s.a},6938:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("5046"),s=i(a("dcad")),r=a("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return h(t)||u(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function h(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){f(t,e,a[e])})}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m=function(){return Promise.all([a.e("common/vendor"),a.e("components/w-picker/w-picker")]).then(a.bind(null,"46c4"))},d={name:"searchForm",components:{wPicker:m},props:{customerType:{type:String,default:"0"},needSalemanList:{type:Boolean,default:!1}},watch:{searchKeyword:function(t,e){if(0==t.length)return this.customerList=this.customerList_filter},searchKeyword_sale:function(t,e){if(0==t.length)return this.SalesmanSearch.SalesmanList=this.saleList_filter}},data:function(){return{currentFilterType:"",SalesmanSearch:{SalesmanItemText:"",SalesmanItem:{},SalesmanItemId:"",isShow:!1,SalesmanList:[]},isShowProList:!1,productTypeText:"纸板",productTypeItem:{},productType:[{type:"1",ct_Desc:"纸板"},{type:"2",ct_Desc:"纸箱"}],endYear:(0,s.default)(Date.now()).format("YYYY"),CustomBar:this.CustomBar,isShowCustomerList:!1,isShowSearchForm:!1,customerList:[],searchKeyword:"",searchKeyword_sale:"",customerList_filter:[],saleList_filter:[],startDate:(0,s.default)(Date.now()).subtract(1,"month").format("YYYY-MM-DD"),endDate:(0,s.default)(Date.now()).format("YYYY-MM-DD"),customerInfo:"",customerItem:{},dataType:"start"}},onReady:function(){},methods:l({filterCustomer:function(){var t=this;this.searchKeyword.length>0?this.customerList=this.customerList.filter(function(e){return e.ct_Desc.includes(t.searchKeyword)}):this.customerList=this.customerList_filter},filterSaleList:function(){var t=this;this.searchKeyword_sale.length>0?this.SalesmanSearch.SalesmanList=this.SalesmanSearch.SalesmanList.filter(function(e){return e.w_Name.includes(t.searchKeyword_sale)}):this.SalesmanSearch.SalesmanList=this.saleList_filter},handleFilterData:function(t){switch(this.currentFilterType=t,t){case"week":this.startDate=(0,s.default)(Date.now()).startOf("week").format("YYYY-MM-DD"),this.endDate=(0,s.default)(Date.now()).format("YYYY-MM-DD");break;case"month":this.startDate=(0,s.default)(Date.now()).startOf("month").format("YYYY-MM-DD"),this.endDate=(0,s.default)(Date.now()).format("YYYY-MM-DD");break;case"season":this.startDate=(0,s.default)(Date.now()).subtract(3,"month").format("YYYY-MM-DD"),this.endDate=(0,s.default)(Date.now()).format("YYYY-MM-DD");break}}},(0,r.mapActions)(["getSalesmanList_action","getCustomerInfo_action","getQutationCustomerList_action"]),{checkInputData:function(){var e=!0,a="";if(""==this.startDate||""==this.endDate)a="起始/结束日期必填",e=!1;else if(""!=this.startDate||""!=this.endDate){var s=this.stringToDate(this.startDate),r=this.stringToDate(this.endDate),i=(0,n.dataDiff)("d",s,r);i>730&&(a="时间间隔不能超过2年",e=!1),i<0&&(a="结束日期必须大于起始日期",e=!1)}return""!=a&&t.showToast({title:a,icon:"none",duration:2e3}),e},stringToDate:function(t,e){e||(e="-");var a,n=t.split(e),s=parseInt(n[0]);a=0==n[1].indexOf("0")?parseInt(n[1].substring(1)):parseInt(n[1]);var r=parseInt(n[2]),i=new Date(s,a-1,r);return i},getSalesmanList:function(){var e=this;if(!(this.SalesmanSearch.SalesmanList.length>0)){var a={w_OptType:0};this.getSalesmanList_action(a).then(function(t){e.SalesmanSearch.SalesmanList=t.records,e.saleList_filter=o(e.SalesmanSearch.SalesmanList)}).catch(function(e){t.showToast({title:"获取业务员列表失败 err:"+e,icon:"none",duration:2e3})})}},loadCustomerList:function(){var e=this;if(!(this.customerList.length>0)){var a={ct_Type:0};this.getQutationCustomerList_action(a).then(function(t){e.customerList=t.records,e.customerList_filter=o(e.customerList)}).catch(function(e){t.showToast({title:"获取客户列表失败 err:"+e,icon:"none",duration:2e3})})}},getSalesmanInfo:function(t){this.SalesmanSearch.isShow=!1,this.SalesmanSearch.SalesmanItemText=t.w_Name,this.SalesmanSearch.SalesmanItemId=t.w_ID,this.SalesmanSearch.SalesmanItem=t},getSelectCustomerInfo:function(t){this.isShowCustomerList=!1,this.customerInfo=t.ct_Desc,this.customerItem=t},getSelectProtypeInfo:function(t){this.isShowProList=!1,this.productTypeText=t.ct_Desc,this.customerItem=t},openCustomerList:function(){this.isShowCustomerList=!0,this.loadCustomerList()},openSalesmanList:function(){this.SalesmanSearch.isShow=!0,this.getSalesmanList()},openDateSelect:function(t){this.dataType=t,this.$refs.DatePicker.show()},onConfirmDate:function(t){"start"===this.dataType?this.startDate=t.result:this.endDate=t.result},comfirmEvent:function(){if(this.checkInputData()){this.isShowSearchForm=!1;var t={ct_SalerId:this.SalesmanSearch.SalesmanItemId,startDate:this.startDate,endDate:this.endDate,ctCode:null===this.customerItem.ct_ID?"":this.customerItem.ct_ID};""==this.customerInfo&&(t.ctCode=""),this.$emit("comfirmEvent",t)}},cancelEvent:function(){this.isShowSearchForm=!1,this.$emit("cancelEvent","cancel")},open:function(){this.isShowSearchForm=!0},close:function(){this.isShowSearchForm=!1}})};e.default=d}).call(this,a("6e42")["default"])},"81cc":function(t,e,a){"use strict";a.r(e);var n=a("f3a4"),s=a("618d");for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);var i=a("2877"),o=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=o.exports},f3a4:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.customerInfo=""},t.e1=function(e){t.SalesmanSearch.SalesmanItemText=""},t.e2=function(e){t.SalesmanSearch.isShow=!1},t.e3=function(e){t.isShowCustomerList=!1},t.e4=function(e){t.isShowProList=!1})},s=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/searchForm/searchForm-create-component',
    {
        'components/searchForm/searchForm-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("81cc"))
        })
    },
    [['components/searchForm/searchForm-create-component']]
]);
