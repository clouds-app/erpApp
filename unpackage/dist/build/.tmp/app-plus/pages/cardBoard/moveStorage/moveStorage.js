(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cardBoard/moveStorage/moveStorage"],{"0d30":function(t,o,e){"use strict";e.r(o);var n=e("ee91"),a=e("7ba7");for(var r in a)"default"!==r&&function(t){e.d(o,t,function(){return a[t]})}(r);e("3df8");var i,u=e("f0c5"),s=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);o["default"]=s.exports},"3df8":function(t,o,e){"use strict";var n=e("cb22"),a=e.n(n);a.a},"7ba7":function(t,o,e){"use strict";e.r(o);var n=e("8367"),a=e.n(n);for(var r in n)"default"!==r&&function(t){e.d(o,t,function(){return n[t]})}(r);o["default"]=a.a},8367:function(t,o,e){"use strict";(function(t,n){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=u(e("a34a")),r=u(e("2464")),i=e("2f62");function u(t){return t&&t.__esModule?t:{default:t}}function s(t,o,e,n,a,r,i){try{var u=t[r](i),s=u.value}catch(c){return void e(c)}u.done?o(s):Promise.resolve(s).then(n,a)}function c(t){return function(){var o=this,e=arguments;return new Promise(function(n,a){var r=t.apply(o,e);function i(t){s(r,n,a,i,u,"next",t)}function u(t){s(r,n,a,i,u,"throw",t)}i(void 0)})}}function d(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.forEach(function(o){f(t,o,e[o])})}return t}function f(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var l=function(){return e.e("components/color-ui-dialog/color-ui-dialog").then(e.bind(null,"43f7"))},h=function(){return Promise.all([e.e("common/vendor"),e.e("components/z-table/z-table")]).then(e.bind(null,"717c"))},m=function(){return e.e("components/uni-icon/uni-icon").then(e.bind(null,"6203"))},p=function(){return e.e("components/searchForm/searchDataList.vue").then(e.bind(null,"a99d"))},g=function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"ad32"))},b={cardBoardNo:"",kuNo:"",originalKuNo:""},N={name:"inStorage",mixins:[r.default],components:{zTable:h,searchForm:p,uniPopup:g,uniIcon:m,alertBox:l},data:function(){return{kuNoExists:!1,toShowModal:!1,msgContent:"",scanType:"",tableHeight:400,errorContent:"暂无数据",cardBoardNoInfoData:[],cardBoardNoInfoColumns:[{key:"ap_OrderNo",title:"工单号",width:200},{key:"ap_ArtID",title:"纸质",width:200},{key:"ap_Size",title:"规格",width:200},{key:"ap_Qty",title:"数量",width:145},{key:"ap_CustName",title:"客户",width:400}],formItem:Object.assign({},b)}},computed:{canKuNoScan:function(){return this.cardBoardNoInfoData&&0==this.cardBoardNoInfoData.length},canSubmitData:function(){return""==this.formItem.cardBoardNo||""==this.formItem.kuNo||!this.kuNoExists}},onReady:function(){this.messageRegister(),this.getTableHeight()},methods:d({getCardBoardNoInfo:function(){var o=this;if(this.cardBoardNoInfoData=[],""!=this.formItem.cardBoardNo){var e={procName:"spGetCardInfoForAPP",params:{CardNo:this.formItem.cardBoardNo,Type:"B"}};this.dataIsLoadding=!0,this.getExecuteDropDownDetailsAction(e).then(function(e){e&&e.list&&e.list.length>0?(o.cardBoardNoInfoData=e.list,o.formItem.originalKuNo=o.cardBoardNoInfoData[0].ap_StationNo):t.showToast({title:"该卡板没有入库!",icon:"none",duration:2e3}),o.dataIsLoadding=!1}).catch(function(e){t.showToast({title:"获取数据失败:"+e,icon:"none",duration:2e3}),o.dataIsLoadding=!1})}else t.showToast({title:"请输入或扫描卡板号",icon:"none",duration:2e3})},comfirmModal:function(t){switch(this.toShowModal=!1,this.currentAction){case"preSubmitDataList":this.submitAddList();break;default:break}},cancelModal:function(t){this.toShowModal=!1},preSubmitDataList:function(){this.currentAction="preSubmitDataList",this.msgContent="确定提交数据吗?",this.toShowModal=!0},submitAddList:function(){var o=this,e={UserID:this.$store.getters.userInfo_getters,cardNo:this.formItem.cardBoardNo,newStationNo:this.formItem.kuNo,StationNo:this.formItem.originalKuNo,Type:"A",list:this.cardBoardNoInfoData};this.$store.dispatch("setStationNoAction",e).then(function(e){o.formItem=Object.assign({},b),o.cardBoardNoInfoData=[],t.showToast({title:"操作成功",icon:"none",duration:2e3})}).catch(function(o){t.showToast({title:"操作失败:"+o,icon:"none",duration:2e3})})},getTableHeight:function(){var t=c(a.default.mark(function t(){var o,e,n,r;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=this,e=o.setTableHeight(),t.next=4,o.getOtherContentHeight("elForm");case 4:return n=t.sent,t.next=7,o.getOtherContentHeight("elBtn");case 7:r=t.sent,null!=n&&null!=r&&(o.tableHeight=e-n-r-20);case 9:case"end":return t.stop()}},t,this)}));function o(){return t.apply(this,arguments)}return o}()},(0,i.mapActions)(["setCardBoardNorwayAction","getExecuteDropDownDetailsAction","getExistStorehouseAction"]),{messageRegister:function(){},turnOnScanCode:function(o){this.scanType=o;var e=this;t.scanCode({scanType:"barCode",success:function(t){switch(console.log(n("条码内容："+t.result," at pages\\cardBoard\\moveStorage\\moveStorage.vue:257")),o){case"cardBoardNo":e.formItem.cardBoardNo=t.result,e.getCardBoardNoInfo();break;case"kuNo":e.formItem.kuNo=t.result;break;default:break}}})},getKuNoInfo:function(){if(this.kuNoExists=!1,""!=this.formItem.kuNo){if(this.formItem.kuNo==this.formItem.originalKuNo)return t.showToast({title:"新库位与原库位一致",icon:"none",duration:2e3}),void(this.formItem.kuNo="");var o=this;this.getExistStorehouseAction(this.formItem.kuNo).then(function(e){o.kuNoExists=e,e||(t.showToast({title:"库位不存在,请重新输入",icon:"none",duration:2e3}),o.formItem.kuNo="")})}else t.showToast({title:"库位不能为空",icon:"none",duration:2e3})}})};o.default=N}).call(this,e("6e42")["default"],e("0de9")["default"])},ae91:function(t,o,e){"use strict";(function(t){e("628f"),e("921b");n(e("66fd"));var o=n(e("0d30"));function n(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("6e42")["createPage"])},cb22:function(t,o,e){},ee91:function(t,o,e){"use strict";var n,a=function(){var t=this,o=t.$createElement;t._self._c},r=[];e.d(o,"b",function(){return a}),e.d(o,"c",function(){return r}),e.d(o,"a",function(){return n})}},[["ae91","common/runtime","common/vendor"]]]);