(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{2518:function(n,t,e){"use strict";var i=e("7ba4"),o=e.n(i);o.a},"3c09":function(n,t,e){"use strict";e.r(t);var i=e("eba5"),o=e.n(i);for(var r in i)"default"!==r&&function(n){e.d(t,n,function(){return i[n]})}(r);t["default"]=o.a},"5ebb":function(n,t,e){"use strict";var i=function(){var n=this,t=n.$createElement;n._self._c},o=[];e.d(t,"a",function(){return i}),e.d(t,"b",function(){return o})},"7ba4":function(n,t,e){},b25b:function(n,t,e){"use strict";e.r(t);var i=e("5ebb"),o=e("3c09");for(var r in o)"default"!==r&&function(n){e.d(t,n,function(){return o[n]})}(r);e("2518");var a=e("2877"),u=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,null,null);t["default"]=u.exports},d798:function(n,t,e){"use strict";(function(n){e("628f"),e("921b");i(e("66fd"));var t=i(e("b25b"));function i(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("6e42")["createPage"])},eba5:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(e("2180")),o=e("2f62");function r(n){return n&&n.__esModule?n:{default:n}}function a(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.forEach(function(t){u(n,t,e[t])})}return n}function u(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var s={data:function(){return{currentVersion:"1.0",isLoading:!1,disabledLoginBtn:!1,loginForm:{username:"",password:""},currentUUId:"",currentMenuList:[],redirectPage:"index"}},onLoad:function(){},onReady:function(){this.getCurrentVersion(),this.loginForm.username=this.$store.getters.userInfo_getters},methods:a({getCurrentVersion:function(){var n=this;plus.runtime.getProperty(plus.runtime.appid,function(t){n.currentVersion=t.version})}},(0,o.mapActions)(["getValidatorToken_action","Login_action","getMenuByToken_action"]),{getUUID:function(){var t=this;this.isLoading=!0,this.disabledLoginBtn=!0;var e={userId:this.loginForm.username},i=this;this.getValidatorToken_action(e).then(function(n){i.currentUUId=n.data,i.handleLogin()}).catch(function(e){n.showToast({title:"获取Validator Token失败:"+e,icon:"none",duration:2e3}),t.disabledLoginBtn=!1,t.isLoading=!1})},handleLogin:function(){var t=this;if(""!=this.loginForm.username&&""!=this.loginForm.password){var e=(0,i.default)((0,i.default)(this.loginForm.password+this.currentUUId)+this.currentUUId),o={userId:this.loginForm.username,pwd:e},r=this;this.Login_action(o).then(function(n){var e=n.data.token;t.$store.commit("setUserObjInfo",n.data),t.$store.commit("setLoginToken",e),t.$store.commit("setUserInfo",t.loginForm.username),r.getMenuList(e)}).catch(function(e){n.showToast({title:"登陆失败:"+e,icon:"none",duration:2e3}),t.disabledLoginBtn=!1,t.isLoading=!1})}else n.showToast({title:"用户名和密码必填！！",icon:"none",duration:2e3}),this.disabledLoginBtn=!1,this.isLoading=!1},getMenuList:function(t){var e=this,i={token:t};this.getMenuByToken_action(i).then(function(t){n.switchTab({url:"../index/index"}),e.disabledLoginBtn=!1,e.isLoading=!1}).catch(function(t){e.disabledLoginBtn=!1,e.isLoading=!1,n.showToast({title:"获取菜单失败:"+t,duration:2e3,icon:"none"})})},addNoticeInfoIntoArray:function(n){var t=[];return n.length>0&&(t=n.map(function(n,t,e){if(n.children.length>0){n.children.map(function(n,t,e){return e[t].noticeCount="",e[t]});return e[t].noticeCount="",e[t]}})),t}})};t.default=s}).call(this,e("6e42")["default"])}},[["d798","common/runtime","common/vendor"]]]);