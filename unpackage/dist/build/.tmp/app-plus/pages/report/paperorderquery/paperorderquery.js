(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/paperorderquery/paperorderquery"],{"1ed0":function(t,e,a){"use strict";a.r(e);var n=a("2c71"),r=a("9240");for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);a("5927");var o=a("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"2c71":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},r=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r})},"3e52":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(a("dcad")),r=s(a("2bdc")),i=(a("362c"),s(a("c2d4")),a("2f62")),o=s(a("2464"));function s(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){l(t,e,a[e])})}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u,h=function(){return Promise.all([a.e("common/vendor"),a.e("components/searchForm/searchForm")]).then(a.bind(null,"81cc"))},d=function(){return Promise.all([a.e("common/vendor"),a.e("components/z-table/z-table")]).then(a.bind(null,"717c"))},m=null,f={name:"paperOrderQuery",mixins:[o.default],components:{searchForm:h,zTable:d},data:function(){return{TabCur:"0",scrollLeft:0,canvasColumnId:"canvasColumn",currentFilterType:"",errorContent:"数据加载中...",tableHeight:0,currentTitle:"日期汇总",cWidth:"",cHeight:"",pixelRatio:1,categories:[],series:[],searchParams:{startDate:(0,n.default)(Date.now()).subtract(1,"year").format("YYYY-MM-DD"),endDate:(0,n.default)(Date.now()).format("YYYY-MM-DD"),ctCode:"",mode:5,size:20},dataTableList:[],barTopData:[],dataColumns:[],dataColumnsM1:[{key:"co_CustId",title:"客户编号",width:200,titleAlign:"left",columnAlign:"left"},{key:"ct_Desc",title:"客户名称",width:200,titleAlign:"left",columnAlign:"left"},{key:"co_Qty",title:"数量",width:145,titleAlign:"right",columnAlign:"right"},{key:"BMoney",title:"本币金额",width:200,titleAlign:"right",columnAlign:"right"}],dataColumnsM2:[{key:"w_Name",title:"业务员",width:250,titleAlign:"left",columnAlign:"left"},{key:"co_Qty",title:"数量",width:250,titleAlign:"right",columnAlign:"right"},{key:"BMoney",title:"本币金额",width:245,titleAlign:"right",columnAlign:"right"}],dataColumnsM3:[{key:"co_Date",title:"订单日期",width:400,titleAlign:"center",columnAlign:"center"},{key:"co_Qty",title:"数量",width:345,titleAlign:"center",columnAlign:"center"}]}},onReady:function(){var t=this;this.getDataSource(),this.getOtherContentHeight(),this.$nextTick(function(){setTimeout(function(){t.tableHeight=t.setTableHeight(!0),t.tableHeight=t.tableHeight+55},200)})},onLoad:function(e){u=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(500)},methods:c({tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.onChangeSwipe(this.TabCur),this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.$nextTick(function(){})},onChangeSwipe:function(t){var e=Number(t);switch(e){case 0:this.currentTitle="TOP20",this.searchParams.mode=5;break;case 1:this.currentTitle="TOP20",this.searchParams.mode=0;break;case 2:this.currentTitle="TOP20",this.searchParams.mode=1;break}this.getDataSource()},updateCanvasInWechat:function(){m.updateData({series:u.series,categories:u.categories,animation:!1})},handleSwichDataColumns:function(){switch(this.searchParams.mode){case 0:this.series=[{name:"数量",type:"column",data:[]},{name:"金额",type:"line",data:[]}],this.dataColumns=this.dataColumnsM1;break;case 1:this.series=[{name:"数量",type:"column",data:[]},{name:"金额",type:"line",data:[]}],this.dataColumns=this.dataColumnsM2;break;case 5:this.series=[{name:"数量",type:"column",data:[]}],this.dataColumns=this.dataColumnsM3;break}},handleFilterData:function(t){switch(this.currentFilterType=t,t){case"week":this.searchParams.startDate=(0,n.default)(Date.now()).startOf("week").format("YYYY-MM-DD"),this.searchParams.endDate=(0,n.default)(Date.now()).format("YYYY-MM-DD");break;case"month":this.searchParams.startDate=(0,n.default)(Date.now()).startOf("month").format("YYYY-MM-DD"),this.searchParams.endDate=(0,n.default)(Date.now()).format("YYYY-MM-DD");break;case"season":this.searchParams.startDate=(0,n.default)(Date.now()).subtract(3,"month").format("YYYY-MM-DD"),this.searchParams.endDate=(0,n.default)(Date.now()).format("YYYY-MM-DD");break}this.getDataSource()},cancelEvent:function(){this.showSearchForm=!1},searchComfirmEvent:function(t){this.currentFilterType="",this.searchParams=Object.assign(this.searchParams,t),this.showSearchForm=!1,null==this.searchParams.ctCode&&(this.searchParams.ctCode=""),this.getDataSource()},openSearchEventForm:function(){this.showSearchForm=!0,this.$refs.searchForm.isShowSearchForm=!0},getEchartData:function(t){var e=this.formatDataIntoEchart(t);this.categories=e.map(function(t){return null==t[0]?"-":t[0]}),this.series[0].data=e.map(function(t){return null==t[1]?"-":t[1]}),5!=this.searchParams.mode&&(this.series[1].data=e.map(function(t){return null==t[2]?"-":t[2]})),this.setChartDataConfig()},formatDataIntoEchart:function(t){var e=[],a={};for(var n in t){switch(this.searchParams.mode){case 0:a={cus_Name:t[n].ct_Desc,cus_Qty:Number.parseFloat(t[n].co_Qty),cus_Amount:Number.parseFloat(t[n].BMoney)};break;case 1:a={cus_Name:t[n].w_Name,cus_Qty:Number.parseFloat(t[n].co_Qty),cus_Amount:Number.parseFloat(t[n].BMoney)};break;case 5:a={cus_Name:t[n].co_Date,cus_Qty:Number.parseFloat(t[n].co_Qty)};break}var r=Object.values(a);e.push(r)}return e}},(0,i.mapActions)(["getPaperCOQueryAnaly_action"]),{getDataSource:function(){this.handleSwichDataColumns();var e=this.searchParams,a=this;this.getPaperCOQueryAnaly_action(e).then(function(t){a.dataTableList=t.orderData,a.getEchartData(t.topData),a.updateCanvasInWechat(),0==a.dataTableList.length&&(a.errorContent="暂无数据")}).catch(function(e){a.errorContent="暂无数据",t.showToast({title:"获取数据失败:"+e,icon:"none",duration:2e3})})},setChartDataConfig:function(){var t={categories:[],series:[]};t.categories=u.categories,t.series=u.series,u.showColumn(this.canvasColumnId,t)},showColumn:function(t,e){m=new r.default({$this:u,canvasId:t,type:"mix",fontSize:11,padding:[5,15,15,15],legend:{show:!0,position:"top",float:"center",lineHeight:11,itemGap:30,padding:10,margin:5,borderWidth:1},dataLabel:!1,dataPointShape:!0,background:"#FFFFFF",pixelRatio:u.pixelRatio,categories:e.categories,series:e.series,animation:!0,enableScroll:!0,xAxis:{disableGrid:!1,type:"grid",gridType:"dash",itemCount:4,scrollShow:!0,scrollAlign:"left"},yAxis:{data:[{calibration:!0,position:"left",title:u.currentTitle,titleFontSize:12}],showTitle:!0,gridType:"dash",dashLength:4,splitNumber:5},width:u.cWidth*u.pixelRatio,height:u.cHeight*u.pixelRatio,extra:{column:{type:"group",width:u.cWidth*u.pixelRatio*.45/e.categories.length}}})},touchColumn:function(t){m.scrollStart(t)},moveColumn:function(t){m.scroll(t)},touchEndColumn:function(t){m.scrollEnd(t),m.touchLegend(t,{animation:!0}),m.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})}})};e.default=f}).call(this,a("6e42")["default"])},5927:function(t,e,a){"use strict";var n=a("9027"),r=a.n(n);r.a},9027:function(t,e,a){},9240:function(t,e,a){"use strict";a.r(e);var n=a("3e52"),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=r.a},b9fa:function(t,e,a){"use strict";(function(t){a("628f"),a("921b");n(a("66fd"));var e=n(a("1ed0"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])}},[["b9fa","common/runtime","common/vendor"]]]);