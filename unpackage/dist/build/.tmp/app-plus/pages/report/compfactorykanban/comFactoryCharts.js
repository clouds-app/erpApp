(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/compfactorykanban/comFactoryCharts"],{"16ad":function(t,e,a){"use strict";a.r(e);var r=a("beae"),n=a.n(r);for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);e["default"]=n.a},2398:function(t,e,a){"use strict";(function(t){a("628f"),a("921b");r(a("66fd"));var e=r(a("40e8"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"40e8":function(t,e,a){"use strict";a.r(e);var r=a("6aa5"),n=a("16ad");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("c1c2");var s=a("2877"),o=Object(s["a"])(n["default"],r["a"],r["b"],!1,null,null,null);e["default"]=o.exports},"6aa5":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n})},b87c:function(t,e,a){},beae:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,n=o(a("2464")),i=o(a("2bdc")),s=(o(a("5b4a")),a("362c"));function o(t){return t&&t.__esModule?t:{default:t}}function c(t){return h(t)||u(t)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function h(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var d=null,m=function(){return Promise.all([a.e("common/vendor"),a.e("components/z-table/z-table")]).then(a.bind(null,"717c"))},g={name:"comFactoryCharts",mixins:[n.default],components:{zTable:m},data:function(){return{errorContent:"数据加载中...",tableHeight:0,cWidth:"",cHeight:"",pixelRatio:1,textarea:"",serverData:"",currentType:"",currentMode:"1",legendData:["面积","米数",""],currentTitlefReport:"本月生产",currentTextOfReport:"生产(面积、米数)对照",categories:[],series:[],dataTableList:[],dataColumns:[],dataColumnsM0:[{key:"Date",title:"日期",width:190,titleAlign:"center",columnAlign:"center"},{key:"Week",title:"星期",width:170,titleAlign:"center",columnAlign:"center"},{key:"Amount",title:"金额",width:190,titleAlign:"center",columnAlign:"center"},{key:"Area",title:"面积",width:190,titleAlign:"center",columnAlign:"center"}],dataColumnsM1:[{key:"Date",title:"日期",width:190,titleAlign:"center",columnAlign:"center"},{key:"Week",title:"星期",width:170,titleAlign:"center",columnAlign:"center"},{key:"Qty",title:"数量",width:190,titleAlign:"center",columnAlign:"center"},{key:"Area",title:"面积",width:190,titleAlign:"center",columnAlign:"center"}],dataColumnsM2:[{key:"Date",title:"日期",width:190,titleAlign:"center",columnAlign:"center"},{key:"Week",title:"星期",width:170,titleAlign:"center",columnAlign:"center"},{key:"Amount",title:"金额",width:190,titleAlign:"center",columnAlign:"center"},{key:"Area",title:"面积",width:190,titleAlign:"center",columnAlign:"center"}],dataColumnsM3:[{key:"Date",title:"日期",width:190,titleAlign:"center",columnAlign:"center"},{key:"Week",title:"星期",width:170,titleAlign:"center",columnAlign:"center"},{key:"inwt",title:"入库重量",width:190,titleAlign:"center",columnAlign:"center"},{key:"inamt",title:"入库金额",width:190,titleAlign:"center",columnAlign:"center"},{key:"outwt",title:"出库重量",width:190,titleAlign:"center",columnAlign:"center"},{key:"outamt",title:"出库金额",width:190,titleAlign:"center",columnAlign:"center"}],dataColumnsM4:[{key:"Date",title:"日期",width:190,titleAlign:"center",columnAlign:"center"},{key:"Week",title:"星期",width:170,titleAlign:"center",columnAlign:"center"},{key:"inamt",title:"入库金额",width:190,titleAlign:"center",columnAlign:"center"},{key:"outamt",title:"出库金额",width:190,titleAlign:"center",columnAlign:"center"}],dataColumnsM5:[{key:"Date",title:"日期",width:190,titleAlign:"center",columnAlign:"center"},{key:"Week",title:"星期",width:170,titleAlign:"center",columnAlign:"center"},{key:"Gathering_Amount",title:"收入",width:190,titleAlign:"center",columnAlign:"center"},{key:"Gathering_Amount",title:"支出",width:190,titleAlign:"center",columnAlign:"center"}],dataColumnsM6:[{key:"Date",title:"日期",width:190,titleAlign:"center",columnAlign:"center"},{key:"Week",title:"星期",width:170,titleAlign:"center",columnAlign:"center"},{key:"TranFee_Amount",title:"金额",width:400,titleAlign:"center",columnAlign:"center"}]}},computed:{currentEchartData:function(){var t=this.$store.getters.currentComFactoryChartData_getter;return t}},onLoad:function(e){this.currentType=e.type,this.getTitle(this.currentType),r=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(500),this.getDataFromWebStorage()},onReady:function(){var t=this;this.dataTableList=this.$store.getters.currentComFactoryChartData_getter,this.$nextTick(function(){t.getOtherContentHeight(),setTimeout(function(){var e=t.setTableHeight(!0);t.tableHeight=e},200)})},methods:{getDataFromWebStorage:function(){if(this.series=[{name:"面积",type:"column",data:[]},{name:"金额",type:"line",data:[]}],this.currentEchartData.constructor==Array&&0!=this.currentEchartData.length){switch(this.categories=this.formatDataIntoEchart(this.currentEchartData,"date"),this.currentType){case"order":this.dataColumns=this.dataColumnsM0;var t=this.formatDataIntoEchart(this.currentEchartData,"area");this.series[0].data=t;var e=this.formatDataIntoEchart(this.currentEchartData,"amt");this.series[1].data=e;break;case"delivery":this.dataColumns=this.dataColumnsM2;var a=this.formatDataIntoEchart(this.currentEchartData,"area");this.series[0].data=a;var r=this.formatDataIntoEchart(this.currentEchartData,"amt");this.series[1].data=r;break;case"production":this.dataColumns=this.dataColumnsM1,this.series=[{name:"面积",type:"column",data:[]},{name:"米数",type:"line",data:[]}];var n=this.formatDataIntoEchart(this.currentEchartData,"area");this.series[0].data=n;var i=this.formatDataIntoEchart(this.currentEchartData,"amt");this.series[1].data=i;break;case"basePaper":this.dataColumns=this.dataColumnsM3,this.series=[{name:"入库总量",type:"column",data:[]},{name:"入库金额",type:"line",data:[]},{name:"出库重量",type:"column",data:[]},{name:"出库金额",type:"line",data:[]}];var s=this.formatDataIntoEchart(this.currentEchartData,"inwt");this.series[0].data=s;var o=this.formatDataIntoEchart(this.currentEchartData,"amt");this.series[1].data=o;var c=this.formatDataIntoEchart(this.currentEchartData,"outwt");this.series[2].data=c;var l=this.formatDataIntoEchart(this.currentEchartData,"outamt");this.series[3].data=l;break;case"subMaterial":this.dataColumns=this.dataColumnsM4,this.series=[{name:"入库金额",type:"line",data:[]},{name:"出库金额",type:"line",data:[]}];var u=this.formatDataIntoEchart(this.currentEchartData,"amt");this.series[0].data=u;var h=this.formatDataIntoEchart(this.currentEchartData,"outamt");this.series[1].data=h;break;case"inoutCome":this.dataColumns=this.dataColumnsM5,this.series=[{name:"收入",type:"line",data:[]},{name:"支出",type:"line",data:[]}];var d=this.formatDataIntoEchart(this.currentEchartData,"amt");this.series[0].data=d;var m=this.formatDataIntoEchart(this.currentEchartData,"outamt");this.series[1].data=m;break;case"transportation":this.dataColumns=this.dataColumnsM6,this.series=[{name:"运费",type:"line",data:[]}];var g=this.formatDataIntoEchart(this.currentEchartData,"amt");this.series[0].data=g;break}this.setChartDataConfig()}},formatDataIntoEchart:function(t,e){var a=[];for(var r in t){var n=t[r],i=t[r].Date,s=this.getModeArea(n),o=this.getModeAmt(n),l=this.getModeOutAmt(n),u=this.getModeOutWt(n),h=this.getModeInWt(n),d={};"date"==e&&(d.date=i),"area"==e&&(d.area=s),"amt"==e&&(d.amt=o),"outamt"==e&&(d.outAmt=l),"outwt"==e&&(d.outAmt=u),"inwt"==e&&(d.outAmt=h);var m=Object.values(d);a.push.apply(a,c(m))}return a},getModeArea:function(t){switch(this.currentMode){case"0":case"1":case"2":return Number.parseFloat(t.Area);case"3":case"4":case"5":case"6":return 0;default:return Number.parseFloat(t.Area)}},getModeAmt:function(t){switch(this.currentMode){case"0":return Number.parseFloat(t.Amount);case"1":return Number.parseFloat(t.Qty);case"2":return Number.parseFloat(t.Amount);case"3":case"4":return Number.parseFloat(t.inamt);case"5":return Number.parseFloat(t.Gathering_Amount);case"6":return Number.parseFloat(t.TranFee_Amount);default:return 0}},getModeOutAmt:function(t){switch(this.currentMode){case"0":case"1":case"2":case"6":return 0;case"3":case"4":return Number.parseFloat(t.outamt);case"5":return Number.parseFloat(t.SPay_Amount);default:return 0}},getModeInWt:function(t){switch(this.currentMode){case"0":case"1":case"2":case"4":case"5":case"6":return 0;case"3":return Number.parseFloat(t.inwt);default:return 0}},getModeOutWt:function(t){switch(this.currentMode){case"0":case"1":case"2":case"4":case"5":case"6":return 0;case"3":return Number.parseFloat(t.outwt);default:return 0}},getRamdon:function(t,e){var a=t-e+1;return Math.abs(Math.floor(Math.random()*a))+t},getTitle:function(t){switch(t){case"order":this.currentMode="0",this.dataColumns=this.dataColumnsM0,this.currentTitlefReport="本月订单",this.currentTextOfReport="订单(面积、金额)对照";break;case"production":this.currentMode="1",this.legendData=["面积","米数",""],this.dataColumns=this.dataColumnsM1,this.currentTitlefReport="本月生产",this.currentTextOfReport="生产(面积、米数)对照";break;case"delivery":this.currentMode="0",this.dataColumns=this.dataColumnsM2,this.currentTitlefReport="本月送货",this.currentTextOfReport="送货(面积、金额)对照";break;case"basePaper":this.currentMode="3",this.legendData=["","入库金额","出库金额","入库重量","出库重量"],this.dataColumns=this.dataColumnsM3,this.currentTitlefReport="本月原纸",this.currentTextOfReport="原纸(金额)对照";break;case"subMaterial":this.currentMode="4",this.legendData=["","入库金额","出库金额","",""],this.dataColumns=this.dataColumnsM4,this.currentTitlefReport="本月辅料",this.currentTextOfReport="辅料(金额)对照";break;case"inoutCome":this.currentMode="5",this.legendData=["","收入","支出","",""],this.dataColumns=this.dataColumnsM5,this.currentTitlefReport="本月收支",this.currentTextOfReport="收支(金额)对照";break;case"transportation":this.currentMode="6",this.legendData=["","金额","","",""],this.dataColumns=this.dataColumnsM6,this.currentTitlefReport="本月运输",this.currentTextOfReport="运输(金额)对照";break}},setChartDataConfig:function(){var t={categories:[],series:[]};t.categories=r.categories,t.series=r.series,t.series.length,r.showColumn("canvasColumn",t)},showColumn:function(t,e){d=new i.default({$this:r,canvasId:t,type:"mix",fontSize:11,padding:[5,15,15,15],legend:{show:!0,position:"top",float:"center",lineHeight:11,itemGap:30,padding:10,margin:5,borderWidth:1},dataLabel:!1,dataPointShape:!0,background:"#FFFFFF",pixelRatio:r.pixelRatio,categories:e.categories,series:e.series,animation:!0,enableScroll:!0,xAxis:{disableGrid:!1,type:"grid",gridType:"dash",itemCount:4,scrollShow:!0,scrollAlign:"left"},yAxis:{data:[{calibration:!0,position:"left",titleFontSize:12}],gridType:"dash",dashLength:4,splitNumber:5},width:r.cWidth*r.pixelRatio,height:r.cHeight*r.pixelRatio,extra:{column:{type:"group",width:r.cWidth*r.pixelRatio*.45/e.categories.length}}})},touchColumn:function(t){d.scrollStart(t)},moveColumn:function(t){d.scroll(t)},touchEndColumn:function(t){d.scrollEnd(t),d.touchLegend(t,{animation:!0}),d.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},changeData:function(){if((0,s.isJSON)(r.textarea)){var e=JSON.parse(r.textarea);d.updateData({series:e.series,categories:e.categories,scrollPosition:"right",animation:!1})}else t.showToast({title:"数据格式错误"})}}};e.default=g}).call(this,a("6e42")["default"])},c1c2:function(t,e,a){"use strict";var r=a("b87c"),n=a.n(r);n.a}},[["2398","common/runtime","common/vendor"]]]);