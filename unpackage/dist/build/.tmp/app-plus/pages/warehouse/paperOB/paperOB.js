(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/warehouse/paperOB/paperOB"],{"18f7":function(t,e,r){},6275:function(t,e,r){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(r("2464")),a=r("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),o.forEach(function(e){p(t,e,r[e])})}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(){return Promise.all([r.e("common/vendor"),r.e("components/z-table/z-table")]).then(r.bind(null,"717c"))},u={name:"paperOB",mixins:[n.default],components:{zTable:c},data:function(){return{scanType:"orderNo",TabCur:0,scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:500,paperStoreTableData:[],operStatus:"",paperOutBtnShow:!1,paperBackBtnShow:!1,paperOutFormItems:{instruct:"",line:"",group:"",outUser:"",inUser:"",coil:"",paperType:"暂ㅤ无",gram:"0",paperWidth:"暂ㅤ无",ewt:"0",desc:""},paperBackFormItems:{instruct:"",line:"",group:"",outUser:"",inUser:"",coil:"",paperType:"暂ㅤ无",gram:"0",paperWidth:"暂ㅤ无",ewt:"0",desc:""},paperOutFormInit:{instruct:"",line:"",group:"",outUser:"",inUser:"",coil:"",paperType:"暂ㅤ无",gram:"0",paperWidth:"暂ㅤ无",ewt:"",desc:""},paperStoreItem:{Vend:"",Type:"",Station:"",Width:"",Gram:"",Coil:""},paperStoreColumns:[{key:"ss_Station",title:"仓位",width:140},{key:"v_desc",title:"制造商",width:180},{key:"ss_SPaperType",title:"纸类",width:180},{key:"ss_Width",title:"纸宽",width:140},{key:"ss_Gram",title:"克重",width:140},{key:"ss_Ewt",title:"重量",width:140},{key:"ss_Coil",title:"卷号",width:220}]}},methods:i({tabSelect:function(t){var e=this;switch(this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.TabCur){case 0:break;case"1":break;case"2":this.$nextTick(function(){e.getOtherContentHeight(),setTimeout(function(){var t=e.setTableHeight(!0);e.tableHeight=t-130},200)});break;default:break}},turnOnScanCode:function(e){this.scanType=e;var r=this;t.scanCode({scanType:"barCode",success:function(t){switch(console.log(o("条码内容："+t.result," at pages\\warehouse\\paperOB\\paperOB.vue:356")),r.TabCur){case 0:"orderNo"==e&&(r.paperOutFormItems.instruct=t.result,r.paperOutInstructBlur()),"rollNo"==e&&(r.paperOutFormItems.coil=t.result,r.getOutPaperInfo());break;case 1:"orderNo"==e&&(r.paperBackFormItems.instruct=t.result,r.paperOutInstructBlur()),"rollNo"==e&&(r.paperBackFormItems.coil=t.result,r.getBackPaperInfo());break;case 2:break;default:break}}})}},(0,a.mapActions)(["spGetSPaperStoreForPDAAction","aspExeuteSPaperSimpleAutoScanAction","spSPaperStoreQueryForPDAAction"]),{getOutPaperInfo:function(){var t=this;""!=this.paperOutFormItems.coil&&(this.paperOutBtnShow=!1,this.getPaperInfo(this.paperOutFormItems.coil).then(function(e){if(e.length>0){var r=e[0];return t.paperOutFormItems.paperType=r.ss_SPaperType,t.paperOutFormItems.gram=r.ss_Gram,t.paperOutFormItems.paperWidth=r.ss_Width,t.paperOutFormItems.ewt=r.ss_Ewt,t.operStatus=r.LastState,t.paperOutBtnShow=!0,void("O"==r.LastState&&t.$nextTick(function(){t.$refs.ewt_input.focus}))}t.paperOutFormItems.coil=""}))},getBackPaperInfo:function(){var t=this;""!=this.paperBackFormItems.coil&&(this.paperBackBtnShow=!1,this.getPaperInfo(this.paperBackFormItems.coil).then(function(e){if(e.length>0){var r=e[0];return t.paperBackFormItems.paperType=r.ss_SPaperType,t.paperBackFormItems.gram=r.ss_Gram,t.paperBackFormItems.paperWidth=r.ss_Width,t.paperBackFormItems.ewt=r.ss_Ewt,t.paperBackBtnShow=!0,void t.$nextTick(function(){t.$refs.back_ewt.focus()})}t.paperBackFormItems.coil=""}))},getPaperInfo:function(e){if(""!=e){var r={Coil:e,Flag:0},o=this;return new Promise(function(e,n){o.spGetSPaperStoreForPDAAction(r).then(function(r){r=r.list,0==r.length&&t.showModal({title:"提示",content:"当前卷号不存在",showCancel:!1}),e(r)}).catch(function(e){o.errorContent="暂无数据",t.showToast({title:"获取数据失败:"+e,icon:"none",duration:2e3})})})}},getInstruct:function(e){if(""!=e){var r=e.split("+");if(!(r.length<5)){var o={line:r[1],group:r[2],inUser:r[4],outUser:r[3]};return o}t.showToast({title:"数据解析失败，参数个数不够",icon:"none",duration:2e3})}else"orderNo"===this.scanType?t.showToast({title:"请输入或扫描指令",icon:"none",duration:2e3}):"rollNo"===this.scanType?t.showToast({title:"请输入或扫描卷号",icon:"none",duration:2e3}):t.showToast({title:"请输入必要信息",icon:"none",duration:2e3})},paperOutInstructBlur:function(){this.scanType="orderNo";var t=this.getInstruct(this.paperOutFormItems.instruct);t&&(Object.assign(this.paperOutFormItems,t),this.paperOutFormItems.instruct="")},paperBackInstructBlur:function(){var t=this.getInstruct(this.paperBackFormItems.instruct);t&&(Object.assign(this.paperBackFormItems,t),this.paperBackFormItems.instruct="")},paperOBRequest:function(e,r){var o=this;return new Promise(function(n,a){o.aspExeuteSPaperSimpleAutoScanAction(e).then(function(e){if(o.$toast.clear(),e.list.length>0)return e.list[0].ErrorStr&&""!=e.list[0].ErrorStr?void t.showModal({title:"提示",content:e.list[0].ErrorStr,showCancel:!1}):(t.showModal({title:"提示",content:r+"成功",showCancel:!1}),void n(e));t.showModal({title:"提示",content:r+"失败",showCancel:!1})}).catch(function(e){o.errorContent="暂无数据",t.showToast({title:"获取数据失败:"+e,icon:"none",duration:2e3}),a()})})},paperOut:function(){var e=this;if(""!=this.paperOutFormItems.coil){var r={Line:this.paperOutFormItems.line,Group:this.paperOutFormItems.group,Oper:"admin",Flag:"out",Coil:this.paperOutFormItems.coil,OutUseID:this.paperOutFormItems.outUser,InUseID:this.paperOutFormItems.inUser,Wt:this.paperOutFormItems.ewt,OperDate:(new Date).format("yyyy-MM-dd hh:mm:ss")};this.paperOBRequest(r,"出仓").then(function(t){e.paperOutFormItems=JSON.parse(JSON.stringify(e.paperOutFormInit)),e.paperOutBtnShow=!1})}else t.showToast({title:"请输入或扫描卷号",icon:"none",duration:2e3})},paperBack:function(){var e=this;if(""!=this.paperBackFormItems.coil){var r={Line:this.paperBackFormItems.line,Group:this.paperBackFormItems.group,Oper:"admin",Flag:"back",Coil:this.paperBackFormItems.coil,OutUseID:this.paperBackFormItems.outUser,InUseID:this.paperBackFormItems.inUser,Wt:this.paperBackFormItems.ewt,OperDate_IN_date:(new Date).format("yyyy-MM-dd hh:mm:ss"),ErrorStr_OUT_varchar:""};this.paperOBRequest(r,"退仓").then(function(t){e.paperBackFormItems=JSON.parse(JSON.stringify(e.paperOutFormInit)),e.paperBackBtnShow=!1})}else t.showToast({title:"请输入或扫描卷号",icon:"none",duration:2e3})},paperStoreSearch:function(){var e=this;""!=this.paperStoreItem.Type?(this.errorContent="数据加载中...",this.spSPaperStoreQueryForPDAAction(this.paperStoreItem).then(function(t){t=t.list,e.paperStoreTableData=t,e.errorContent="暂无数据"}).catch(function(r){e.errorContent="暂无数据",t.showToast({title:"获取数据失败:"+r,icon:"none",duration:2e3})})):t.showToast({title:"请输入纸类",icon:"none",duration:2e3})}})};e.default=u}).call(this,r("6e42")["default"],r("0de9")["default"])},"65e1":function(t,e,r){"use strict";r.r(e);var o=r("8150"),n=r("be08");for(var a in n)"default"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);r("c7e4");var s,i=r("f0c5"),p=Object(i["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);e["default"]=p.exports},8150:function(t,e,r){"use strict";var o,n=function(){var t=this,e=t.$createElement;t._self._c},a=[];r.d(e,"b",function(){return n}),r.d(e,"c",function(){return a}),r.d(e,"a",function(){return o})},be08:function(t,e,r){"use strict";r.r(e);var o=r("6275"),n=r.n(o);for(var a in o)"default"!==a&&function(t){r.d(e,t,function(){return o[t]})}(a);e["default"]=n.a},c7e4:function(t,e,r){"use strict";var o=r("18f7"),n=r.n(o);n.a},f737:function(t,e,r){"use strict";(function(t){r("628f"),r("921b");o(r("66fd"));var e=o(r("65e1"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("6e42")["createPage"])}},[["f737","common/runtime","common/vendor"]]]);