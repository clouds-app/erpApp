(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/warehouse/paperIn/paperIn"],{"40f2":function(t,e,n){"use strict";(function(t){n("628f"),n("921b");r(n("66fd"));var e=r(n("9cf7"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},5299:function(t,e,n){},"9cf7":function(t,e,n){"use strict";n.r(e);var r=n("f8b7"),o=n("f388");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("9d46");var i,s=n("f0c5"),u=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);e["default"]=u.exports},"9d46":function(t,e,n){"use strict";var r=n("5299"),o=n.n(r);o.a},"9e40":function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("2464")),a=n("2f62");function i(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){u(t,e,n[e])})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){return Promise.all([n.e("common/vendor"),n.e("components/z-table/z-table")]).then(n.bind(null,"717c"))},f={name:"paperIn",mixins:[o.default],components:{zTable:c},data:function(){return{TabCur:0,scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:0,findGoodsTableDataItems:[],paperOutTableDataItems:[],paperInFormItems:{instruct:"",station:"",fOrderNo:"",line:"",group:"",fQty:"",fDNum:"",desc:""},paperInFormInit:{instruct:"",station:"",fOrderNo:"",line:"",group:"",fQty:"",fDNum:"",desc:""},findGoodsItem:{fOrderNo:""},paperOutItem:{fOrderNo:"",batch:""},findGoodsColumns:[{key:"OrderNo",title:"工单号",width:200},{key:"Station",title:"仓位",width:200},{key:"FNum",title:"板号",width:200},{key:"State",title:"状态",width:145}]}},onReady:function(){},methods:s({tabSelect:function(t){var e=this;switch(this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.TabCur){case 0:break;case"1":this.$nextTick(function(){e.getOtherContentHeight("bodyContentHeight"),setTimeout(function(){var t=e.setTableHeight(!0);e.tableHeight=t-130},200)});break;case"2":this.$nextTick(function(){e.getOtherContentHeight("bodyContentHeight2"),setTimeout(function(){var t=e.setTableHeight(!0);e.tableHeight=t-130},200)});break;default:break}},turnOnScanCode:function(e){var n=this;t.scanCode({scanType:"barCode",success:function(t){switch(console.log(r("条码内容："+t.result," at pages\\warehouse\\paperIn\\paperIn.vue:249")),e){case"in":n.paperInFormItems.instruct=t.result,n.getParamsFromScanCode();break;case"out":this.paperOutItem.fOrderNo=t.result;break;case"search":this.findGoodsItem.fOrderNo=t.result;break;default:break}}})}},(0,a.mapActions)(["spScanOrderAction"]),{barCodeBlur:function(){""!=this.paperInFormItems.instruct?this.getParamsFromScanCode():t.showToast({title:"请输入或扫描条码",icon:"none"})},getParamsFromScanCode:function(){var e=this.paperInFormItems.instruct.split("*");if(e.length<5)t.showToast({title:"数据解析失败，参数个数不够",icon:"none"});else{var n={fOrderNo:e[0],fDNum:e[1],fQty:e[2],line:e[3],group:e[4]};Object.assign(this.paperInFormItems,n)}},paperInRequest:function(e){var n=this;return this.errorContent="数据加载中...",new Promise(function(r,o){n.spScanOrderAction(e).then(function(t){r(t.list)}).catch(function(e){n.errorContent="暂无数据",t.showToast({title:"获取数据失败:"+e,icon:"none"}),o(e)})})},paprtIn:function(){if(""!=this.paperInFormItems.station)if(""!=this.paperInFormItems.fOrderNo&&""!=this.paperInFormItems.fQty&&""!=this.paperInFormItems.fDNum&&""!=this.paperInFormItems.line&&""!=this.paperInFormItems.group){var e={BarCodeStr:this.paperInFormItems.instruct,Station:this.paperInFormItems.station,Flag:0,FOrderNo:this.paperInFormItems.fOrderNo,FQty:this.paperInFormItems.fQty,FDNum:this.paperInFormItems.fDNum,FLine:this.paperInFormItems.line,FClass:this.paperInFormItems.group,Remark:this.paperInFormItems.desc};this.paperInRequest(e).then(function(e){e&&1==e[0].res?t.showToast({title:"入仓成功"}):t.showToast({title:"入仓失败",icon:"none",duration:2e3})}).catch(function(e){t.showToast({title:"入仓失败"+e,icon:"none",duration:2e3})})}else t.showToast({title:"请先扫描完整的指令",icon:"none"});else t.showToast({title:"请输入仓位",icon:"none"})},findGoods:function(){var e=this;if(""!=this.findGoodsItem.fOrderNo){var n={FOrderNo:this.findGoodsItem.fOrderNo,BarCodeStr:this.findGoodsItem.fOrderNo,Flag:2};this.paperInRequest(n).then(function(t){t&&t.length>0&&(e.findGoodsTableDataItems=t[0].resultList)}).catch(function(e){t.showToast({title:"暂无数据",icon:"none",duration:2e3})})}else t.showToast({title:"请输入或扫描工单号",icon:"none",duration:2e3})},paperOut:function(){var e=this;if(""!=this.paperOutItem.fOrderNo)if(""!=this.paperOutItem.batch){var n={FOrderNo:this.paperOutItem.fOrderNo,BarCodeStr:"",Batch:this.paperOutItem.batch,Flag:1};this.paperInRequest(n).then(function(t){t&&t.length>0&&(e.paperOutTableDataItems=t.resultList[0])}).catch(function(e){t.showToast({title:"暂无数据",icon:"none",duration:2e3})})}else t.showToast({title:"请输入车次",icon:"none",duration:2e3});else t.showToast({title:"请输入或扫描工单号",icon:"none",duration:2e3})}})};e.default=f}).call(this,n("6e42")["default"],n("0de9")["default"])},f388:function(t,e,n){"use strict";n.r(e);var r=n("9e40"),o=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e["default"]=o.a},f8b7:function(t,e,n){"use strict";var r,o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return r})}},[["40f2","common/runtime","common/vendor"]]]);