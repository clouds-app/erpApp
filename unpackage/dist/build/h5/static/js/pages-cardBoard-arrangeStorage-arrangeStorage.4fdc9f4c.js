(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cardBoard-arrangeStorage-arrangeStorage"],{1411:function(t,e,a){"use strict";var o=a("690e"),n=a.n(o);n.a},2508:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".margin-text-center[data-v-442d3a02]{text-align:center;margin:%?20?%}.border-top[data-v-442d3a02]{border-top:1px solid #eee}.cu-form-group .title[data-v-442d3a02]{min-width:calc(4em + 15px)}",""])},"381b":function(t,e,a){"use strict";a.r(e);var o=a("7c4a"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a},"690e":function(t,e,a){var o=a("2508");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=a("4f06").default;n("50f03232",o,!0,{sourceMap:!1,shadowMode:!1})},7957:function(t,e,a){"use strict";a.r(e);var o=a("dd5a"),n=a("381b");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("1411");var r=a("2877"),s=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,"442d3a02",null);e["default"]=s.exports},"7c4a":function(t,e,a){"use strict";var o=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=o(a("3b8d"));a("20d6");var i=o(a("cebc")),r=o(a("5176")),s=o(a("43f7")),c=o(a("717c")),d=o(a("6203")),l=o(a("a99d")),u=o(a("2464")),f=a("2f62"),m=o(a("ad32")),h={originalStationNo:"",originalBoardCard:"",orderNo:"",cardBoardNo:"",kuNo:""},v={name:"inStorage",mixins:[u.default],components:{zTable:c.default,searchForm:l.default,uniPopup:m.default,uniIcon:d.default,alertBox:s.default},data:function(){return{dataSource:[],currentAction:"",toShowModal:!1,msgContent:"",currentSelectItem:{},currentSelect:"line",originalBoardCardList:[],scanType:"",tableHeight:400,errorContent:"暂无数据",cardBoardNoInfoData:[],cardBoardNoInfoColumns:[{key:"ap_OrderNo",title:"工单号",width:200},{key:"ap_ArtID",title:"纸质",width:200},{key:"ap_Size",title:"规格",width:200},{key:"ap_Qty",title:"数量",width:145},{key:"ap_CustName",title:"客户",width:400},{title:"操作",listenerClick:!0,width:130,titleAlign:"center",columnAlign:"center",format:{template:"删除",names:[]}}],formItem:(0,r.default)({},h)}},mounted:function(){this.messageRegister(),this.getTableHeight()},methods:(0,i.default)({setSearchDataListSource:function(t){this.currentSelect=t,this.$refs["searchForm"].isShowSearchList=!0,"LicensePlate"===t&&(this.dataSource=this.originalBoardCardList,this.$refs["searchForm"].dataSourceList=this.originalBoardCardList)},getSelectDataInfo:function(t){switch(this.currentSelect){case"LicensePlate":this.formItem.originalBoardCard=t.ct_Desc;break;default:break}},comfirmModal:function(t){switch(this.toShowModal=!1,this.currentAction){case"preSubmitDataList":this.submitAddList();break;case"deleteDetailItem":this.deleteDetailItem();break;default:break}},cancelModal:function(t){this.toShowModal=!1},preSubmitDataList:function(){this.currentAction="preSubmitDataList",this.msgContent="确定更改库位吗?",this.toShowModal=!0},submitAddList:function(){var t=this,e={procName:"spPaperScanInfoChanged",params:{Type:"B",cardNo:this.formItem.cardBoardNo,newStationNo:this.formItem.kuNo,UserID:this.$store.getters.userInfo_getters,list:this.cardBoardNoInfoData}};this.$store.dispatch("updateStorehouseAction",e).then(function(e){t.formItem=(0,r.default)({},h),t.cardBoardNoInfoData=[],uni.showToast({title:"操作成功",icon:"none",duration:2e3})}).catch(function(t){uni.showToast({title:"操作失败:"+t,icon:"none",duration:2e3})})},deleteDetailItem:function(){var t=this,e=this.cardBoardNoInfoData.findIndex(function(e){return e.ap_OrderNo==t.currentSelectItem.ap_OrderNo});-1!=e&&this.cardBoardNoInfoData.splice(e,1)},onClickRowEvent:function(t){this.currentSelectItem=t,this.currentAction="deleteDetailItem",this.msgContent="确定删除当前数据吗?",this.toShowModal=!0},addWorkNoInfo:function(){var t=this;if(""!=this.formItem.workNo){var e={Identification:this.formItem.workNo};this.dataIsLoadding=!0,this.scanJobNoArrangeAction(e).then(function(e){t.getCardBoardNoInfo(),uni.showToast({title:"扫描工单号成功",icon:"none",duration:2e3}),t.dataIsLoadding=!1}).catch(function(e){uni.showToast({title:"获取数据失败:"+e,icon:"none",duration:2e3}),t.dataIsLoadding=!1})}else uni.showToast({title:"请输入或扫描工单号",icon:"none",duration:2e3})},getTableHeight:function(){var t=(0,n.default)(regeneratorRuntime.mark(function t(){var e,a,o,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,a=e.setTableHeight(),t.next=4,e.getOtherContentHeight("elForm");case 4:return o=t.sent,t.next=7,e.getOtherContentHeight("elBtn");case 7:n=t.sent,null!=o&&null!=n&&(e.tableHeight=a-o-n-20);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},(0,f.mapActions)(["getBoardDetailsAction","scanCardArrangeAction","scanJobNoArrangeAction","getExecuteDropDownDetailsAction"]),{messageRegister:function(){},getCardBoardNoInfo:function(){var t=this;if(""!=this.formItem.cardBoardNo){var e={procName:"spGetCardInfoForAPP",params:{CardNo:this.formItem.cardBoardNo,Type:"B"}};this.cardBoardNoInfoData=[],this.dataIsLoadding=!0,this.getExecuteDropDownDetailsAction(e).then(function(e){if(e&&e.list&&e.list.length>0){t.cardBoardNoInfoData=e.list;var a=e.list.map(function(t){var e={type:t.ap_StationNo,ct_Desc:t.ap_StationNo};return e});t.originalBoardCardList=a,t.formItem.originalStationNo=e.list[0].ap_StationNo,t.formItem.originalBoardCard=a[0].ct_Desc}else uni.showToast({title:"没有该卡板对应的数据",icon:"none",duration:2e3});t.dataIsLoadding=!1}).catch(function(e){uni.showToast({title:"获取数据失败:"+e,icon:"none",duration:2e3}),t.dataIsLoadding=!1})}else uni.showToast({title:"请输入或扫描卡板号",icon:"none",duration:2e3})},turnOnScanCode:function(t){this.scanType=t;var e=this;uni.scanCode({scanType:"barCode",success:function(a){switch(console.log("条码内容："+a.result),t){case"cardBoardNo":e.formItem.cardBoardNo=a.result,e.getCardBoardNoInfo();break;case"kuNo":e.formItem.kuNo=a.result;break;case"workNo":e.formItem.workNo=a.result,e.addWorkNoInfo();break;default:break}}})}})};e.default=v},dd5a:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("仓库货物整理")])],2),a("v-uni-form",[a("v-uni-view",{ref:"elForm",staticClass:"elForm"},[a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("库位号:")]),a("v-uni-input",{ref:"kuWeiInput",attrs:{placeholder:"请输入或扫描库位号",name:"input"},model:{value:t.formItem.kuNo,callback:function(e){t.$set(t.formItem,"kuNo",e)},expression:"formItem.kuNo"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("workNo")}}},[t._v("扫描")])],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("卡板号:")]),a("v-uni-input",{attrs:{placeholder:"请输入或扫描卡板号",name:"input"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getCardBoardNoInfo.apply(void 0,arguments)}},model:{value:t.formItem.cardBoardNo,callback:function(e){t.$set(t.formItem,"cardBoardNo",e)},expression:"formItem.cardBoardNo"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("cardBoardNo")}}},[t._v("扫描")])],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("工单号:")]),a("v-uni-input",{attrs:{placeholder:"请输入或扫描卡工单号",name:"input"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.addWorkNoInfo.apply(void 0,arguments)}},model:{value:t.formItem.workNo,callback:function(e){t.$set(t.formItem,"workNo",e)},expression:"formItem.workNo"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",attrs:{loading:!1,disabled:""==t.formItem.cardBoardNo,type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("workNo")}}},[t._v("扫描")])],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("原卡板:")]),a("v-uni-input",{attrs:{disabled:"",placeholder:"请选择原卡板",name:"input"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("LicensePlate")}},model:{value:t.formItem.originalBoardCard,callback:function(e){t.$set(t.formItem,"originalBoardCard",e)},expression:"formItem.originalBoardCard"}}),a("v-uni-text",{staticClass:"cuIcon-rounddown text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("LicensePlate")}}})],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"cl-tableDesc"},[t._v("纸板明细清单")])],1)],1)],1),a("v-uni-view",{staticClass:"bingStorage-zTable"},[a("zTable",{attrs:{stickSide:!0,tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.cardBoardNoInfoData,columns:t.cardBoardNoInfoColumns},on:{onClick:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickRowEvent.apply(void 0,arguments)}}})],1),a("searchForm",{ref:"searchForm",attrs:{dataSource:t.dataSource},on:{getSelectDataInfo:function(e){arguments[0]=e=t.$handleEvent(e),t.getSelectDataInfo.apply(void 0,arguments)}}}),a("alertBox",{ref:"alertBox",attrs:{msgContent:t.msgContent,toShowModal:t.toShowModal},on:{cancelModal:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelModal.apply(void 0,arguments)},comfirmModal:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmModal.apply(void 0,arguments)}}}),a("v-uni-view",{ref:"elBtn",staticClass:"elBtn margin-text-center"},[a("v-uni-view",{staticClass:"flex  p-xs "},[a("v-uni-view",{staticClass:"flex-twice radius"}),a("v-uni-view",{staticClass:"flex-sub radius"}),a("v-uni-view",{staticClass:"flex-twice  radius"},[a("v-uni-button",{staticClass:"cu-btn block bg-green  lg",attrs:{loading:!1,disabled:!1,type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.preSubmitDataList()}}},[t._v("更改库位")])],1)],1)],1)],1)},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})}}]);