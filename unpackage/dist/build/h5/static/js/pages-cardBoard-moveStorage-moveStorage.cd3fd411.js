(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cardBoard-moveStorage-moveStorage"],{"0409":function(t,e,o){var a=o("b7f0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=o("4f06").default;n("417ecd10",a,!0,{sourceMap:!1,shadowMode:!1})},"0d30":function(t,e,o){"use strict";o.r(e);var a=o("457c"),n=o("7ba7");for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);o("59ae");var r=o("2877"),s=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"79253070",null);e["default"]=s.exports},"457c":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[o("template",{attrs:{slot:"content"},slot:"content"},[t._v("卡板挪库位")])],2),o("v-uni-form",[o("v-uni-view",{ref:"elForm",staticClass:"elForm"},[o("v-uni-view",{staticClass:"cu-form-group border-top"},[o("v-uni-view",{staticClass:"title"},[t._v("卡板号:")]),o("v-uni-input",{attrs:{placeholder:"请输入或扫描卡板号",name:"input"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getCardBoardNoInfo.apply(void 0,arguments)}},model:{value:t.formItem.cardBoardNo,callback:function(e){t.$set(t.formItem,"cardBoardNo",e)},expression:"formItem.cardBoardNo"}}),o("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("cardBoardNo")}}},[t._v("扫描")])],1),o("v-uni-view",{staticClass:"cu-form-group border-top"},[o("v-uni-view",{staticClass:"title"},[t._v("库位:")]),o("v-uni-input",{ref:"kuWeiInput",attrs:{placeholder:"请输入或扫描库位",name:"input"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getKuNoInfo.apply(void 0,arguments)}},model:{value:t.formItem.kuNo,callback:function(e){t.$set(t.formItem,"kuNo",e)},expression:"formItem.kuNo"}}),o("v-uni-button",{staticClass:"cu-btn bg-green shadow",attrs:{disabled:0==t.cardBoardNoInfoData.length},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("kuNo")}}},[t._v("扫描")])],1),o("v-uni-view",{staticClass:"cu-form-group border-top"},[o("v-uni-view",{staticClass:"title"},[t._v("原库位:")]),o("v-uni-input",{ref:"kuWeiInput",attrs:{disabled:!0,placeholder:"原库位",name:"input"},model:{value:t.formItem.originalKuNo,callback:function(e){t.$set(t.formItem,"originalKuNo",e)},expression:"formItem.originalKuNo"}})],1),o("v-uni-view",{staticClass:"cu-form-group border-top"},[o("v-uni-view",{staticClass:"cl-tableDesc"},[t._v("纸板明细清单")])],1)],1)],1),o("v-uni-view",{staticClass:"bingStorage-zTable"},[o("zTable",{attrs:{tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.cardBoardNoInfoData,columns:t.cardBoardNoInfoColumns}})],1),o("alertBox",{ref:"alertBox",attrs:{msgContent:t.msgContent,toShowModal:t.toShowModal},on:{cancelModal:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelModal.apply(void 0,arguments)},comfirmModal:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmModal.apply(void 0,arguments)}}}),o("v-uni-view",{ref:"elBtn",staticClass:"elBtn margin-text-center"},[o("v-uni-view",{staticClass:"flex  p-xs "},[o("v-uni-view",{staticClass:"flex-twice radius"}),o("v-uni-view",{staticClass:"flex-sub radius"}),o("v-uni-view",{staticClass:"flex-twice  radius"},[o("v-uni-button",{staticClass:"cu-btn block bg-green  lg",attrs:{loading:!1,disabled:0==t.cardBoardNoInfoData.length||!t.kuNoExists,type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.preSubmitDataList()}}},[t._v("提交")])],1)],1)],1)],1)},n=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return n})},"59ae":function(t,e,o){"use strict";var a=o("0409"),n=o.n(a);n.a},"7ba7":function(t,e,o){"use strict";o.r(e);var a=o("810c"),n=o.n(a);for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);e["default"]=n.a},"810c":function(t,e,o){"use strict";var a=o("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("96cf");var n=a(o("3b8d"));o("ac6a");var i=a(o("cebc")),r=a(o("5176")),s=a(o("43f7")),u=a(o("717c")),c=a(o("6203")),l=a(o("a99d")),d=a(o("2464")),f=o("2f62"),m=a(o("ad32")),h={cardBoardNo:"",kuNo:"",originalKuNo:""},v={name:"inStorage",mixins:[d.default],components:{zTable:u.default,searchForm:l.default,uniPopup:m.default,uniIcon:c.default,alertBox:s.default},data:function(){return{kuNoExists:!1,toShowModal:!1,msgContent:"",scanType:"",tableHeight:400,errorContent:"暂无数据",cardBoardNoInfoData:[],cardBoardNoInfoColumns:[{key:"ap_OrderNo",title:"工单号",width:200},{key:"ap_ArtID",title:"纸质",width:200},{key:"ap_Size",title:"规格",width:200},{key:"ap_Qty",title:"数量",width:145},{key:"ap_CustName",title:"客户",width:400}],formItem:(0,r.default)({},h)}},mounted:function(){this.messageRegister(),this.getTableHeight()},methods:(0,i.default)({getCardBoardNoInfo:function(){var t=this;if(this.cardBoardNoInfoData=[],""!=this.formItem.cardBoardNo){var e={procName:"spGetCardInfoForAPP",params:{CardNo:this.formItem.cardBoardNo,Type:"B"}};this.dataIsLoadding=!0,this.getExecuteDropDownDetailsAction(e).then(function(e){e&&e.list&&e.list.length>0?(t.cardBoardNoInfoData=e.list,t.formItem.originalKuNo=t.cardBoardNoInfoData[0].ap_StationNo):uni.showToast({title:"没有该卡板对应的数据",icon:"none",duration:2e3}),t.dataIsLoadding=!1}).catch(function(e){uni.showToast({title:"获取数据失败:"+e,icon:"none",duration:2e3}),t.dataIsLoadding=!1})}else uni.showToast({title:"请输入或扫描卡板号",icon:"none",duration:2e3})},comfirmModal:function(t){switch(this.toShowModal=!1,this.currentAction){case"preSubmitDataList":this.submitAddList();break;default:break}},cancelModal:function(t){this.toShowModal=!1},preSubmitDataList:function(){this.currentAction="preSubmitDataList",this.msgContent="确定提交数据吗?",this.toShowModal=!0},submitAddList:function(){var t=this,e=[];this.cardBoardNoInfoData.forEach(function(o,a){e.push({UserID:t.$store.getters.userInfo_getters,cardNo:t.formItem.cardBoardNo,newStationNo:t.formItem.kuNo,StationNo:o.ap_StationNo,ID1:o.ID1,Type:"A"})}),this.$store.dispatch("setStationNoAction",{list:e}).then(function(e){t.formItem=(0,r.default)({},h),t.cardBoardNoInfoData=[],uni.showToast({title:"操作成功",icon:"none",duration:2e3})}).catch(function(t){uni.showToast({title:"操作失败:"+t,icon:"none",duration:2e3})})},getTableHeight:function(){var t=(0,n.default)(regeneratorRuntime.mark(function t(){var e,o,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,o=e.setTableHeight(),t.next=4,e.getOtherContentHeight("elForm");case 4:return a=t.sent,t.next=7,e.getOtherContentHeight("elBtn");case 7:n=t.sent,null!=a&&null!=n&&(e.tableHeight=o-a-n-20);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},(0,f.mapActions)(["setCardBoardNorwayAction","getExecuteDropDownDetailsAction","getExistStorehouseAction"]),{messageRegister:function(){},turnOnScanCode:function(t){this.scanType=t;var e=this;uni.scanCode({scanType:"barCode",success:function(o){switch(console.log("条码内容："+o.result),t){case"cardBoardNo":e.formItem.cardBoardNo=o.result,e.getCardBoardNoInfo();break;case"kuNo":e.formItem.kuNo=o.result;break;default:break}}})},getKuNoInfo:function(){if(this.kuNoExists=!1,""!=this.formItem.kuNo){if(this.formItem.kuNo==this.formItem.originalKuNo)return uni.showToast({title:"新库位与原库位一致",icon:"none",duration:2e3}),void(this.formItem.kuNo="");var t=this;this.getExistStorehouseAction(this.formItem.kuNo).then(function(e){t.kuNoExists=e,e||(uni.showToast({title:"库位不存在,请重新输入",icon:"none",duration:2e3}),t.formItem.kuNo="")})}else uni.showToast({title:"库位不能为空",icon:"none",duration:2e3})}})};e.default=v},b7f0:function(t,e,o){e=t.exports=o("2350")(!1),e.push([t.i,".margin-text-center[data-v-79253070]{text-align:center;margin:%?20?%}.border-top[data-v-79253070]{border-top:1px solid #eee}.cu-form-group .title[data-v-79253070]{min-width:calc(4em + 15px)}",""])}}]);