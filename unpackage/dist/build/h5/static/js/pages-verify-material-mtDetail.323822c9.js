(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-verify-material-mtDetail"],{"0741":function(t,e,i){"use strict";var n=i("e54b"),a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("cebc")),s=n(i("491c")),r=a(i("2464")),u=i("2f62"),l={name:"originalPaperDetail",mixins:[r.default],components:{},data:function(){return{btn_disabled:!1,dialogTitle:"审批说明",idShowModal:!1,dataSourceList:[],currentItemDetailList:[],currentIndex:0,detailItems:{},dialogType:"reject",formItems:{poId:"",approvalExplain:"",approveState:0}}},mounted:function(){this.loadData()},onLoad:function(t){this.currentIndex=t.id},methods:(0,o.default)({},(0,u.mapActions)(["approveProdPoAction","searchProdPODetailAction"]),{BackPageEvent:function(){this.btn_disabled&&uni.$emit(s.BackToPage_Refresh,{itemIndex:this.currentIndex})},searchCurrentItemDetailList:function(){var t=this,e={poId:this.formItems.poId};this.searchProdPODetailAction(e).then(function(e){t.currentItemDetailList=e.data}).catch(function(t){uni.showToast({title:"查询详细列表失败 err:"+t,icon:"none",duration:2e3})})},submitContent:function(){var t=this;this.btn_disabled=!1;var e=this.formItems;this.approveProdPoAction(e).then(function(e){uni.showToast({title:"审核成功",duration:2e3}),t.btn_disabled=!0}).catch(function(t){uni.showToast({title:"审核失败 err:"+t,icon:"none",duration:2e3})})},openDialog:function(t){"resolve"===t?(this.dialogTitle="审批说明(同意)",this.formItems.approveState=1):(this.dialogTitle="审批说明(驳回)",this.formItems.approveState=0),this.dialogType=t,this.idShowModal=!0},textareaAInput:function(t){this.formItems.approvalExplain=t.detail.value},okDialog:function(){"reject"===this.dialogType&&""===this.formItems.approvalExplain?(this.idShowModal=!1,uni.showToast({title:"请填写备注内容！",icon:"none",duration:2e3})):(this.submitContent(),this.idShowModal=!1)},cancelDialog:function(){this.idShowModal=!1},loadData:function(){this.dataSourceList=this.$store.getters.materialList_getter,this.detailItems=this.dataSourceList[this.currentIndex],null!=this.detailItems&&(this.formItems.poId=this.detailItems.ID1,this.formItems.approvalExplain="",this.searchCurrentItemDetailList())}})};e.default=l},2464:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("e814"));i("28a5");var o=n(i("795b")),s=n(i("7e00")),r={name:"mixin-base",data:function(){return{pageSetting:{current:1,pageSize:15,total:0},pageTitle:"",otherHeight:0,leftContentHeight:0}},computed:{menuList:function(){var t=this.$store.getters.menuList_getters;return t}},methods:{getOtherContentHeight:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new o.default(function(i,n){var a=t,o=uni.createSelectorQuery().select("."+e);o.boundingClientRect(function(t){console.log("other Height:"+t.height),a.otherHeight=t.height,t.height,i(t.height)}).exec(function(t){})})},setTableHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.otherHeight=0);try{var e=uni.getSystemInfoSync();return console.log("CustomBar:"+this.CustomBar),this.leftContentHeight=e.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(i){}},getImgUrl:function(t){return s.default.baseImgUrl+t},formatData:function(t){return null==t?"":this.stringToDate(t).format("yyyy-MM-dd")},stringToDate:function(t,e){e||(e="-");var i,n=t.split(e),o=(0,a.default)(n[0]);i=0===n[1].indexOf("0")?(0,a.default)(n[1].substring(1)):(0,a.default)(n[1]);var s=(0,a.default)(n[2]),r=new Date(o,i-1,s);return r},checkLogin:function(){var t=uni.getStorageSync("TOKEN");if(null==t||""===t||null==this.menuList||0===this.menuList.length)try{uni.reLaunch({url:"/pages/login/login"})}catch(e){}}},onLoad:function(){this.checkLogin()},mounted:function(){}};e.default=r},"2d1c":function(t,e,i){"use strict";i.r(e);var n=i("0741"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"36ce":function(t,e,i){"use strict";i.r(e);var n=i("6b7c"),a=i("2d1c");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("e37d");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"ad9b38e6",null);e["default"]=r.exports},"491c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReLoadData=e.BackToPage_Refresh=void 0;var n="BACKTOPAGE_REFRESH";e.BackToPage_Refresh=n;var a="ReLoadData";e.ReLoadData=a},6708:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".marginBottom10[data-v-ad9b38e6]{margin-bottom:10px;height:1px;width:100%}.marginTop50[data-v-ad9b38e6]{margin-top:50px;height:1px;width:100%}.card[data-v-ad9b38e6]{width:90%;margin-left:5%;border-radius:%?10?%;padding:%?30?%}.grid-title[data-v-ad9b38e6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.text-price[data-v-ad9b38e6]{color:#4aecdb;font-size:%?50?%}.button-group[data-v-ad9b38e6]{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;bottom:0;width:100%}",""])},"6b7c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0},on:{BackPageEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.BackPageEvent.apply(void 0,arguments)}}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("采购单详情")])],2),i("v-uni-view",[i("v-uni-view",{staticClass:"grid-warp"},[i("v-uni-view",{staticClass:"grid-title"},[i("v-uni-text",{domProps:{textContent:t._s(t.detailItems.poerName+"-"+t.detailItems.vendName)}})],1),i("v-uni-view",{staticClass:"grid-body"},[i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("单号:"+t.detailItems.po_No)}})],1),i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("供应商:"+t.detailItems.vendName)}})],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("金额(含税):"+t.detailItems.po_SumTax)}})],1),i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("总数:"+t.detailItems.po_Qty)}})],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("日期:"+t.formatData(t.detailItems.po_PODate))}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"grid-warp"},[i("v-uni-view",{staticClass:"grid-title"},[t._v("采购单详情")]),t._l(t.currentItemDetailList,function(e,n){return[i("v-uni-view",{key:n+"_0",staticClass:"grid-body"},[i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("名称:"+e.ProdName)}})],1),i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("规格:"+e.model)}})],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("单位:"+e.unitName)}})],1),i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("数量:"+e.poi_PoQty)}})],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("单价:￥"+e.poi_TaxPrice)}})],1),i("v-uni-view",[i("v-uni-text",{domProps:{textContent:t._s("价格(含税):￥"+e.TaxAmt)}})],1)],1)],1)]})],2)],1),i("v-uni-view",{staticClass:"cu-modal",class:t.idShowModal?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v(t._s(t.dialogTitle))]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelDialog.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"text-left padding-sm"},[i("v-uni-textarea",{attrs:{maxlength:"60",placeholder:"请输入审批说明..."},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.textareaAInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn line-green text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelDialog.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"cu-btn bg-green margin-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.okDialog.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"marginTop50"}),i("v-uni-view",{staticClass:"button-group cu-bar bg-white tabbar border shop"},[i("v-uni-view",{staticClass:"btn-group"},[i("v-uni-button",{staticClass:"cu-btn bg-blue round shadow-blur lg",attrs:{disabled:t.btn_disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDialog("resolve")}}},[t._v("同意")]),i("v-uni-button",{staticClass:"cu-btn bg-red round shadow-blur lg",attrs:{disabled:t.btn_disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDialog("reject")}}},[t._v("驳回")])],1)],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},e37d:function(t,e,i){"use strict";var n=i("fbcf"),a=i.n(n);a.a},e54b:function(t,e,i){var n=i("268f"),a=i("85f2");function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=a&&n?n(t,i):{};o.get||o.set?a(e,i,o):e[i]=t[i]}return e.default=t,e}t.exports=o},fbcf:function(t,e,i){var n=i("6708");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("f09cfad6",n,!0,{sourceMap:!1,shadowMode:!1})}}]);