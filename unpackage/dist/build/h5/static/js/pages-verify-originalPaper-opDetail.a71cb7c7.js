(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-verify-originalPaper-opDetail"],{2464:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("e814"));i("28a5");var s=n(i("7e00")),o={name:"mixin-base",data:function(){return{pageTitle:"",otherHeight:0,leftContentHeight:0}},computed:{menuList:function(){var t=this.$store.getters.menuList_getters;return t}},methods:{getOtherContentHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight",e=this,i=uni.createSelectorQuery().select("."+t);i.boundingClientRect(function(t){console.log("other Height:"+t.height),e.otherHeight=t.height}).exec()},setTableHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.otherHeight=0);try{var e=uni.getSystemInfoSync();return console.log("windowHeight:"+e.windowHeight),console.log("CustomBar:"+this.CustomBar),console.log("bodyContentHeight:"+this.otherHeight),this.leftContentHeight=e.windowHeight-this.CustomBar-this.otherHeight-10,console.log("tableHeight:"+this.leftContentHeight),this.leftContentHeight}catch(i){}},getImgUrl:function(t){return s.default.baseImgUrl+t},formatData:function(t){return null==t?"":this.stringToDate(t).format("yyyy-MM-dd")},stringToDate:function(t,e){e||(e="-");var i,n=t.split(e),s=(0,a.default)(n[0]);i=0===n[1].indexOf("0")?(0,a.default)(n[1].substring(1)):(0,a.default)(n[1]);var o=(0,a.default)(n[2]),r=new Date(s,i-1,o);return r},checkLogin:function(){var t=uni.getStorageSync("TOKEN");if(console.warn("mixins=check==>Token："+t),null==t||""===t||null==this.menuList||0===this.menuList.length)try{uni.reLaunch({url:"/pages/login/login"})}catch(e){}}},onLoad:function(){this.checkLogin()},mounted:function(){}};e.default=o},"3d2d":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".marginBottom10[data-v-7646364d]{margin-bottom:10px;height:1px;width:100%}.marginTop50[data-v-7646364d]{margin-top:50px;height:1px;width:100%}.card[data-v-7646364d]{width:90%;margin-left:5%;border-radius:%?10?%;padding:%?30?%}.grid-title[data-v-7646364d]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.text-price[data-v-7646364d]{color:#4aecdb;font-size:%?50?%}.button-group[data-v-7646364d]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;bottom:0;width:100%}",""])},"491c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackToPage_Refresh=void 0;var n="BACKTOPAGE_REFRESH";e.BackToPage_Refresh=n},"507b":function(t,e,i){"use strict";i.r(e);var n=i("fa96"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=a.a},8836:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0},on:{BackPageEvent:function(e){e=t.$handleEvent(e),t.BackPageEvent(e)}}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("采购单详情")])],2),i("v-uni-view",[i("v-uni-view",{staticClass:"grid-warp"},[i("v-uni-view",{staticClass:"grid-title"},[t._v(t._s(t.detailItems.poerName)+"-"+t._s(t.detailItems.vendName))]),i("v-uni-view",{staticClass:"grid-body"},[i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("单号:"+t._s(t.detailItems.sp_No))])],1),i("v-uni-view",[i("v-uni-text",[t._v("日期:"+t._s(t.formatData(t.detailItems.sp_PODate)))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("税率:"+t._s(t.detailItems.sp_Rate)+"%")])],1),i("v-uni-view",[i("v-uni-text",[t._v("币别:"+t._s(t.detailItems.sp_Coin))])],1)],1)],1)],1),i("v-uni-view",{staticClass:"grid-warp"},[i("v-uni-view",{staticClass:"grid-title"},[t._v("采购单详情")]),t._l(t.currentItemDetailList,function(e,n){return[i("v-uni-view",{key:n+"_0",staticClass:"grid-body"},[i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("品名:"+t._s(e.kindName))])],1),i("v-uni-view",[i("v-uni-text",[t._v("纸宽:"+t._s(e.si_Width))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("克重:"+t._s(e.si_Gram))])],1),i("v-uni-view",[i("v-uni-text",[t._v("级别:"+t._s(e.gradeName))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("卷数:"+t._s(e.si_Coil))])],1),i("v-uni-view",[i("v-uni-text",[t._v("价格(含税):￥"+t._s(e.si_TaxPrice))])],1)],1)],1)]})],2)],1),i("v-uni-view",{staticClass:"cu-modal",class:t.idShowModal?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v(t._s(t.dialogTitle))]),i("v-uni-view",{staticClass:"action",on:{click:function(e){e=t.$handleEvent(e),t.cancelDialog(e)}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"text-left padding-sm"},[i("v-uni-textarea",{attrs:{maxlength:"60",placeholder:"请输入审批说明..."},on:{input:function(e){e=t.$handleEvent(e),t.textareaAInput(e)}}})],1),i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn line-green text-green",on:{click:function(e){e=t.$handleEvent(e),t.cancelDialog(e)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"cu-btn bg-green margin-left",on:{click:function(e){e=t.$handleEvent(e),t.okDialog(e)}}},[t._v("确定")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"marginTop50"}),i("v-uni-view",{staticClass:"button-group cu-bar bg-white tabbar border shop"},[i("v-uni-view",{staticClass:"btn-group"},[i("v-uni-button",{staticClass:"cu-btn bg-blue round shadow-blur lg",attrs:{disabled:t.btn_disabled},on:{click:function(e){e=t.$handleEvent(e),t.openDialog("resolve")}}},[t._v("同意")]),i("v-uni-button",{staticClass:"cu-btn bg-red round shadow-blur lg",attrs:{disabled:t.btn_disabled},on:{click:function(e){e=t.$handleEvent(e),t.openDialog("reject")}}},[t._v("驳回")])],1)],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},a26b:function(t,e,i){"use strict";var n=i("e1d2"),a=i.n(n);a.a},c2e1:function(t,e,i){"use strict";i.r(e);var n=i("8836"),a=i("507b");for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);i("a26b");var o=i("2877"),r=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"7646364d",null);e["default"]=r.exports},e1d2:function(t,e,i){var n=i("3d2d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("7a2c45ae",n,!0,{sourceMap:!1,shadowMode:!1})},e54b:function(t,e,i){var n=i("268f"),a=i("85f2");function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=a&&n?n(t,i):{};s.get||s.set?a(e,i,s):e[i]=t[i]}return e.default=t,e}t.exports=s},fa96:function(t,e,i){"use strict";var n=i("e54b"),a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("f499")),o=a(i("cebc")),r=n(i("491c")),l=a(i("2464")),u=i("2f62"),c={name:"originalPaperDetail",mixins:[l.default],components:{},data:function(){return{btn_disabled:!1,dialogTitle:"审批说明",idShowModal:!1,dataSourceList:[],currentIndex:0,currentItemDetailList:{},detailItems:{},dialogType:"reject",formItems:{poId:"",approvalExplain:"",approveState:0}}},mounted:function(){this.loadData()},onLoad:function(t){this.currentIndex=t.id},methods:(0,o.default)({},(0,u.mapActions)(["approvePOAction","searchPODetailAction"]),{BackPageEvent:function(){this.btn_disabled&&uni.$emit(r.BackToPage_Refresh,{itemIndex:this.currentIndex})},searchCurrentItemDetailList:function(){var t=this,e={poId:this.formItems.poId};this.searchPODetailAction(e).then(function(e){t.currentItemDetailList=e.data,console.warn("this.currentItemDetailList:"+(0,s.default)(e))}).catch(function(t){uni.showToast({title:"查询详细列表失败 err:"+t,icon:"none",duration:2e3})})},submitContent:function(){var t=this;this.btn_disabled=!1;var e=this.formItems;this.approvePOAction(e).then(function(e){uni.showToast({title:"审核成功",duration:2e3}),t.btn_disabled=!0}).catch(function(t){uni.showToast({title:"审核失败 err:"+t,icon:"none",duration:2e3})})},openDialog:function(t){"resolve"===t?(this.dialogTitle="审批说明(同意)",this.formItems.approveState=1):(this.dialogTitle="审批说明(驳回)",this.formItems.approveState=0),this.dialogType=t,this.idShowModal=!0},textareaAInput:function(t){this.formItems.approvalExplain=t.detail.value},okDialog:function(){"reject"===this.dialogType&&""===this.formItems.approvalExplain?(this.idShowModal=!1,uni.showToast({title:"请填写备注内容！",icon:"none",duration:2e3})):(this.submitContent(),this.idShowModal=!1)},cancelDialog:function(){this.idShowModal=!1},loadData:function(){this.dataSourceList=this.$store.getters.originalPapersList_getter,this.detailItems=this.dataSourceList[this.currentIndex],null!=this.detailItems&&(this.formItems.poId=this.detailItems.ID1,this.formItems.approvalExplain="",this.searchCurrentItemDetailList())}})};e.default=c}}]);