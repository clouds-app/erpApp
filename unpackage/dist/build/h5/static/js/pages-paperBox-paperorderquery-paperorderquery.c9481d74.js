(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-paperBox-paperorderquery-paperorderquery"],{"0072":function(t,e,a){"use strict";a.r(e);var i=a("ea27"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"04f2":function(t,e,a){var i=a("a8dd");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("7f434a30",i,!0,{sourceMap:!1,shadowMode:!1})},"084d":function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("75fc")),s=i(a("e814"));a("28a5"),a("6762"),a("2fdb");var r=i(a("cebc")),c=i(a("0a0d")),o=a("5046"),l=i(a("dcad")),u=i(a("46c4")),h=a("2f62"),d={name:"searchForm",components:{wPicker:u.default},props:{customerType:{type:String,default:"0"},needSalemanList:{type:Boolean,default:!1}},watch:{searchKeyword:function(t,e){if(0==t.length)return this.customerList=this.customerList_filter},searchKeyword_sale:function(t,e){if(0==t.length)return this.SalesmanSearch.SalesmanList=this.saleList_filter}},data:function(){return{currentFilterType:"",SalesmanSearch:{SalesmanItemText:"",SalesmanItem:{},SalesmanItemId:"",isShow:!1,SalesmanList:[]},isShowProList:!1,productTypeText:"纸板",productTypeItem:{},productType:[{type:"1",ct_Desc:"纸板"},{type:"2",ct_Desc:"纸箱"}],endYear:(0,l.default)((0,c.default)()).format("YYYY"),CustomBar:this.CustomBar,isShowCustomerList:!1,isShowSearchForm:!1,customerList:[],searchKeyword:"",searchKeyword_sale:"",customerList_filter:[],saleList_filter:[],startDate:(0,l.default)((0,c.default)()).subtract(1,"month").format("YYYY-MM-DD"),endDate:(0,l.default)((0,c.default)()).format("YYYY-MM-DD"),customerInfo:"",customerItem:{},dataType:"start"}},mounted:function(){},methods:(0,r.default)({filterCustomer:function(){var t=this;this.searchKeyword.length>0?this.customerList=this.customerList.filter(function(e){return e.ct_Desc.includes(t.searchKeyword)}):this.customerList=this.customerList_filter},filterSaleList:function(){var t=this;this.searchKeyword_sale.length>0?this.SalesmanSearch.SalesmanList=this.SalesmanSearch.SalesmanList.filter(function(e){return e.w_Name.includes(t.searchKeyword_sale)}):this.SalesmanSearch.SalesmanList=this.saleList_filter},handleFilterData:function(t){switch(this.currentFilterType=t,t){case"week":this.startDate=(0,l.default)((0,c.default)()).startOf("week").format("YYYY-MM-DD"),this.endDate=(0,l.default)((0,c.default)()).format("YYYY-MM-DD");break;case"month":this.startDate=(0,l.default)((0,c.default)()).startOf("month").format("YYYY-MM-DD"),this.endDate=(0,l.default)((0,c.default)()).format("YYYY-MM-DD");break;case"season":this.startDate=(0,l.default)((0,c.default)()).subtract(3,"month").format("YYYY-MM-DD"),this.endDate=(0,l.default)((0,c.default)()).format("YYYY-MM-DD");break}}},(0,h.mapActions)(["getSalesmanList_action","getCustomerInfo_action","getQutationCustomerList_action"]),{checkInputData:function(){var t=!0,e="";if(""==this.startDate||""==this.endDate)e="起始/结束日期必填",t=!1;else if(""!=this.startDate||""!=this.endDate){var a=this.stringToDate(this.startDate),i=this.stringToDate(this.endDate),n=(0,o.dataDiff)("d",a,i);n>730&&(e="时间间隔不能超过2年",t=!1),n<0&&(e="结束日期必须大于起始日期",t=!1)}return""!=e&&uni.showToast({title:e,icon:"none",duration:2e3}),t},stringToDate:function(t,e){e||(e="-");var a,i=t.split(e),n=(0,s.default)(i[0]);a=0==i[1].indexOf("0")?(0,s.default)(i[1].substring(1)):(0,s.default)(i[1]);var r=(0,s.default)(i[2]),c=new Date(n,a-1,r);return c},getSalesmanList:function(){var t=this;if(!(this.SalesmanSearch.SalesmanList.length>0)){var e={w_OptType:0};this.getSalesmanList_action(e).then(function(e){t.SalesmanSearch.SalesmanList=e.records,t.saleList_filter=(0,n.default)(t.SalesmanSearch.SalesmanList)}).catch(function(t){uni.showToast({title:"获取业务员列表失败 err:"+t,icon:"none",duration:2e3})})}},loadCustomerList:function(){var t=this;if(!(this.customerList.length>0)){var e={ct_Type:0};this.getQutationCustomerList_action(e).then(function(e){t.customerList=e.records,t.customerList_filter=(0,n.default)(t.customerList)}).catch(function(t){uni.showToast({title:"获取客户列表失败 err:"+t,icon:"none",duration:2e3})})}},getSalesmanInfo:function(t){this.SalesmanSearch.isShow=!1,this.SalesmanSearch.SalesmanItemText=t.w_Name,this.SalesmanSearch.SalesmanItemId=t.w_ID,this.SalesmanSearch.SalesmanItem=t},getSelectCustomerInfo:function(t){this.isShowCustomerList=!1,this.customerInfo=t.ct_Desc,this.customerItem=t},getSelectProtypeInfo:function(t){this.isShowProList=!1,this.productTypeText=t.ct_Desc,this.customerItem=t},openCustomerList:function(){this.isShowCustomerList=!0,this.loadCustomerList()},openSalesmanList:function(){this.SalesmanSearch.isShow=!0,this.getSalesmanList()},openDateSelect:function(t){this.dataType=t,this.$refs.DatePicker.show()},onConfirmDate:function(t){"start"===this.dataType?this.startDate=t.result:this.endDate=t.result},comfirmEvent:function(){if(this.checkInputData()){this.isShowSearchForm=!1;var t={ct_SalerId:this.SalesmanSearch.SalesmanItemId,startDate:this.startDate,endDate:this.endDate,ctCode:null===this.customerItem.ct_ID?"":this.customerItem.ct_ID};""==this.customerInfo&&(t.ctCode=""),this.$emit("comfirmEvent",t)}},cancelEvent:function(){this.isShowSearchForm=!1,this.$emit("cancelEvent","cancel")},open:function(){this.isShowSearchForm=!0},close:function(){this.isShowSearchForm=!1}})};e.default=d},"2ed8":function(t,e,a){"use strict";a.r(e);var i=a("d3e7"),n=a("0072");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("9bd4");var r=a("2877"),c=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"f4ce64ee",null);e["default"]=c.exports},"618d":function(t,e,a){"use strict";a.r(e);var i=a("084d"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"81cc":function(t,e,a){"use strict";a.r(e);var i=a("8fb7"),n=a("618d");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);var r=a("2877"),c=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"62ae09ba",null);e["default"]=c.exports},"8fb7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"cu-modal bottom-modal",class:t.isShowSearchForm?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white"},[a("v-uni-view",{staticClass:"action text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelEvent.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-view",{staticClass:"action text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmEvent.apply(void 0,arguments)}}},[t._v("确定")])],1),a("v-uni-view",{staticClass:"text-left padding-sm"},[a("v-uni-form",[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("快速方式")]),a("v-uni-button",{class:"week"===t.currentFilterType?"cu-btn bg-orange":"cu-btn line-orange",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleFilterData("week")}}},[t._v("本周")]),a("v-uni-button",{class:"month"===t.currentFilterType?"cu-btn bg-orange":"cu-btn line-orange",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleFilterData("month")}}},[t._v("本月")]),a("v-uni-button",{class:"season"===t.currentFilterType?"cu-btn bg-orange":"cu-btn line-orange",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleFilterData("season")}}},[t._v("本季")])],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("开始日期")]),a("v-uni-input",{attrs:{disabled:"true",placeholder:"输入开始日期",name:"input"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDateSelect("start")}}},[t._v("日期")])],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("结束日期")]),a("v-uni-input",{attrs:{disabled:"true",placeholder:"输入框结束日期",name:"input"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDateSelect("end")}}},[t._v("日期")])],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("客　　户")]),a("v-uni-input",{attrs:{disabled:"",placeholder:"请选择客户",name:"input"},model:{value:t.customerInfo,callback:function(e){t.customerInfo=e},expression:"customerInfo"}}),a("v-uni-button",{staticClass:"margin-right cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.customerInfo=""}}},[t._v("清空")]),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCustomerList.apply(void 0,arguments)}}},[t._v("选择")])],1),t.needSalemanList?a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("业 务 员")]),a("v-uni-input",{attrs:{disabled:"",placeholder:" 请选择客户",name:"input"},model:{value:t.SalesmanSearch.SalesmanItemText,callback:function(e){t.$set(t.SalesmanSearch,"SalesmanItemText",e)},expression:"SalesmanSearch.SalesmanItemText"}}),a("v-uni-button",{staticClass:"margin-right cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SalesmanSearch.SalesmanItemText=""}}},[t._v("清空")]),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openSalesmanList.apply(void 0,arguments)}}},[t._v("选择")])],1):t._e()],1)],1)],1)],1),a("w-picker",{ref:"DatePicker",attrs:{mode:"date",startYear:"2016",endYear:t.endYear,defaultVal:[0,0,0],current:!0,themeColor:"#f00"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirmDate.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.SalesmanSearch.isShow?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SalesmanSearch.isShow=!1}}},[a("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-bar bg-white search "},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"cuIcon-search"}),a("v-uni-input",{attrs:{type:"text",placeholder:"关键词","confirm-type":"search"},model:{value:t.searchKeyword_sale,callback:function(e){t.searchKeyword_sale=e},expression:"searchKeyword_sale"}})],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.filterSaleList()}}},[t._v("搜索")])],1)],1)],1),t._l(t.SalesmanSearch.SalesmanList,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item arrow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getSalesmanInfo(e)}}},[a("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[a("v-uni-view",{domProps:{textContent:t._s(e.w_Name)}})],1)],1)})],2)],1)],1),a("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.isShowCustomerList?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShowCustomerList=!1}}},[a("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-bar bg-white search "},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"cuIcon-search"}),a("v-uni-input",{attrs:{type:"text",placeholder:"关键词","confirm-type":"search"},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}})],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.filterCustomer()}}},[t._v("搜索")])],1)],1)],1),t._l(t.customerList,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item arrow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getSelectCustomerInfo(e)}}},[a("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[a("v-uni-view",{domProps:{textContent:t._s(e.ct_Desc)}})],1)],1)})],2)],1)],1),a("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.isShowProList?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShowProList=!1}}},[a("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},t._l(t.productType,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item arrow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getSelectProtypeInfo(e)}}},[a("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[a("v-uni-view",{domProps:{textContent:t._s(e.ct_Desc)}})],1)],1)}),1)],1)],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"9bd4":function(t,e,a){"use strict";var i=a("04f2"),n=a.n(i);n.a},a8dd:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"uni-swiper[data-v-f4ce64ee]{display:block;height:%?500?%}.button-sp-area[data-v-f4ce64ee]{text-align:center;padding-top:%?10?%;background:#fff}.button-sp-area uni-button[data-v-f4ce64ee]{margin-left:%?40?%}\n\t/*样式的width和height一定要与定义的cWidth和cHeight相对应*/.qiun-charts[data-v-f4ce64ee]{width:%?750?%;height:%?500?%;background-color:#fff}.charts[data-v-f4ce64ee]{width:%?750?%;height:%?500?%;background-color:#fff}",""])},c2d4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={LineA:{categories:["2012","2013","2014","2015","2016","2017"],series:[{name:"=柱图=",type:"column",data:[35,8,25,37,4,20]},{name:"=折线=",type:"line",data:[70,40,65,100,44,68]}]}};e.default=i},d3e7:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0},on:{searchEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.openSearchEventForm.apply(void 0,arguments)}}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸箱订单汇总")]),a("template",{attrs:{slot:"right"},slot:"right"},[t._v("查询")])],2),a("v-uni-view",{staticClass:"bodyContentHeight"},[a("v-uni-scroll-view",{staticClass:"bg-white nav",attrs:{"scroll-x":""}},[a("v-uni-view",{staticClass:"flex text-center"},[a("v-uni-view",{staticClass:"cu-item flex-sub",class:0==t.TabCur?"text-orange cur":"",attrs:{"data-id":"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v("按客户汇总")]),a("v-uni-view",{staticClass:"cu-item flex-sub",class:1==t.TabCur?"text-orange cur":"",attrs:{"data-id":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v("按业务员汇总")])],1)],1),a("zTable",{attrs:{showPaging:!0,pageSetting:t.pageSetting,tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.dataTableList,columns:t.dataColumns},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.pageChange.apply(void 0,arguments)}}})],1),a("searchForm",{ref:"searchForm",attrs:{needSalemanList:!0,customerType:t.ct_Type},on:{cancelEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelEvent.apply(void 0,arguments)},comfirmEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.searchComfirmEvent.apply(void 0,arguments)}}})],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},ea27:function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("db0c")),s=i(a("82a3")),r=i(a("5176"));a("c5f6");var c,o=i(a("cebc")),l=i(a("0a0d")),u=i(a("81cc")),h=i(a("dcad")),d=i(a("2bdc")),m=(a("362c"),i(a("717c"))),f=(i(a("c2d4")),a("2f62")),v=i(a("2464")),g=null,p={name:"paperOrderQuery",mixins:[v.default],components:{searchForm:u.default,zTable:m.default},data:function(){return{ct_Type:"1",TabCur:"0",scrollLeft:0,canvasColumnId:"canvasColumn",currentFilterType:"",errorContent:"数据加载中...",tableHeight:0,currentTitle:"日期汇总",cWidth:"",cHeight:"",pixelRatio:1,categories:[],series:[],searchParams:{startDate:(0,h.default)((0,l.default)()).subtract(1,"year").format("YYYY-MM-DD"),endDate:(0,h.default)((0,l.default)()).format("YYYY-MM-DD"),cList:"",ct_SalerId:"",mode:0},dataTableList:[],barTopData:[],dataColumns:[],dataColumnsM1:[{key:"ct_Desc",title:"名称",width:200,titleAlign:"left",columnAlign:"left"},{key:"co_Qty",title:"数量",width:145,titleAlign:"right",columnAlign:"right"},{key:"BMoney",title:"本币金额",width:200,titleAlign:"right",columnAlign:"right"},{key:"Aarea",title:"面积",width:200,titleAlign:"right",columnAlign:"right"},{key:"Acube",title:"体积",width:200,titleAlign:"right",columnAlign:"right"},{key:"AmtB",title:"金额点比",width:200,titleAlign:"right",columnAlign:"right"}],dataColumnsM2:[{key:"w_Name",title:"名称",width:200,titleAlign:"left",columnAlign:"left"},{key:"co_Qty",title:"数量",width:145,titleAlign:"right",columnAlign:"right"},{key:"BMoney",title:"本币金额",width:200,titleAlign:"right",columnAlign:"right"},{key:"Aarea",title:"面积",width:200,titleAlign:"right",columnAlign:"right"},{key:"Acube",title:"体积",width:200,titleAlign:"right",columnAlign:"right"},{key:"AmtB",title:"金额点比",width:200,titleAlign:"right",columnAlign:"right"}]}},mounted:function(){var t=this;this.getDataSource(),this.getOtherContentHeight(),this.$nextTick(function(){setTimeout(function(){t.tableHeight=t.setTableHeight(!0),t.tableHeight=t.tableHeight+55},200)})},onLoad:function(t){c=this,this.cWidth=uni.upx2px(750),this.cHeight=uni.upx2px(500)},methods:(0,o.default)({pageChange:function(t){this.pageSetting.current=t,this.getDataSource()},tabSelect:function(t){var e=this;this.TabCur=t.currentTarget.dataset.id,this.searchParams.mode=this.TabCur,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.$nextTick(function(){setTimeout(function(){var t=e.setTableHeight();e.tableHeight=t-50},200)}),this.getDataSource()},onChangeSwipe:function(t){var e=Number(t);switch(e){case 0:this.canvasColumnId="canvasColumn1",this.currentTitle="客户下单TOP20",this.searchParams.mode=0;break;case 1:this.canvasColumnId="canvasColumn2",this.currentTitle="业务员TOP20",this.searchParams.mode=1;break}this.getDataSource()},updateCanvasInWechat:function(){g.updateData({series:c.series,categories:c.categories,animation:!1})},handleSwichDataColumns:function(){switch(Number(this.searchParams.mode)){case 0:this.series=[{name:"数量",type:"column",data:[]},{name:"金额",type:"line",data:[]}],this.dataColumns=this.dataColumnsM1;break;case 1:this.series=[{name:"数量",type:"column",data:[]},{name:"金额",type:"line",data:[]}],this.dataColumns=this.dataColumnsM2;break}},handleFilterData:function(t){switch(this.currentFilterType=t,t){case"week":this.searchParams.startDate=(0,h.default)((0,l.default)()).startOf("week").format("YYYY-MM-DD"),this.searchParams.endDate=(0,h.default)((0,l.default)()).format("YYYY-MM-DD");break;case"month":this.searchParams.startDate=(0,h.default)((0,l.default)()).startOf("month").format("YYYY-MM-DD"),this.searchParams.endDate=(0,h.default)((0,l.default)()).format("YYYY-MM-DD");break;case"season":this.searchParams.startDate=(0,h.default)((0,l.default)()).subtract(3,"month").format("YYYY-MM-DD"),this.searchParams.endDate=(0,h.default)((0,l.default)()).format("YYYY-MM-DD");break}this.getDataSource()},cancelEvent:function(){this.showSearchForm=!1},searchComfirmEvent:function(t){this.currentFilterType="",this.searchParams=(0,r.default)(this.searchParams,t),this.showSearchForm=!1,this.resetSearchParams(),this.getDataSource()},resetSearchParams:function(){null==this.searchParams.ctCode&&(this.searchParams.ctCode=""),null==this.searchParams.ct_SalerId&&(this.searchParams.ct_SalerId="")},openSearchEventForm:function(){this.showSearchForm=!0,this.$refs.searchForm.isShowSearchForm=!0},getEchartData:function(t){var e=this.formatDataIntoEchart(t);this.categories=e.map(function(t){return null==t[0]?"-":t[0]}),this.series[0].data=e.map(function(t){return null==t[1]?"-":t[1]}),5!=this.searchParams.mode&&(this.series[1].data=e.map(function(t){return null==t[2]?"-":t[2]})),this.setChartDataConfig()},formatDataIntoEchart:function(t){var e=[],a={};for(var i in t){switch(this.searchParams.mode){case 0:a={cus_Name:t[i].ct_Desc,cus_Qty:(0,s.default)(t[i].co_Qty),cus_Amount:(0,s.default)(t[i].BMoney)};break;case 1:a={cus_Name:t[i].w_Name,cus_Qty:(0,s.default)(t[i].co_Qty),cus_Amount:(0,s.default)(t[i].BMoney)};break;case 5:a={cus_Name:t[i].co_Date,cus_Qty:(0,s.default)(t[i].co_Qty)};break}var r=(0,n.default)(a);e.push(r)}return e}},(0,f.mapActions)(["getPaperBoxOrderSummary_action"]),{getDataSource:function(){this.handleSwichDataColumns(),this.resetSearchParams();var t={sFrom:this.searchParams.startDate,sTo:this.searchParams.endDate,mode:this.searchParams.mode,cList:this.searchParams.ctCode,ct_SalerId:this.searchParams.ct_SalerId,size:this.pageSetting.pageSize,current:this.pageSetting.current},e=this;this.getPaperBoxOrderSummary_action(t).then(function(t){e.dataTableList=t.data.records,0==e.dataTableList.length&&(e.errorContent="暂无数据")}).catch(function(t){e.errorContent="暂无数据",uni.showToast({title:"获取数据失败:"+t,icon:"none",duration:2e3})})},setChartDataConfig:function(){var t={categories:[],series:[]};t.categories=c.categories,t.series=c.series,c.showColumn(this.canvasColumnId,t)},showColumn:function(t,e){g=new d.default({$this:c,canvasId:t,type:"mix",fontSize:11,padding:[5,15,15,15],legend:{show:!0,position:"top",float:"center",lineHeight:11,itemGap:30,padding:10,margin:5,borderWidth:1},dataLabel:!1,dataPointShape:!0,background:"#FFFFFF",pixelRatio:c.pixelRatio,categories:e.categories,series:e.series,animation:!0,enableScroll:!0,xAxis:{disableGrid:!1,type:"grid",gridType:"dash",itemCount:4,scrollShow:!0,scrollAlign:"left"},yAxis:{data:[{calibration:!0,position:"left",title:c.currentTitle,titleFontSize:12}],showTitle:!0,gridType:"dash",dashLength:4,splitNumber:5},width:c.cWidth*c.pixelRatio,height:c.cHeight*c.pixelRatio,extra:{column:{type:"group",width:c.cWidth*c.pixelRatio*.45/e.categories.length}}})},touchColumn:function(t){g.scrollStart(t)},moveColumn:function(t){g.scroll(t)},touchEndColumn:function(t){g.scrollEnd(t),g.touchLegend(t,{animation:!0}),g.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})}})};e.default=p}}]);