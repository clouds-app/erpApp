(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-report-sumofcustarrears-sumofcustarrears"],{"084d":function(t,e,a){"use strict";var n=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(a("75fc")),i=n(a("e814"));a("28a5"),a("6762"),a("2fdb");var o=n(a("cebc")),c=n(a("0a0d")),r=a("5046"),l=n(a("dcad")),u=n(a("46c4")),h=a("2f62"),d={name:"searchForm",components:{wPicker:u.default},props:{customerType:{type:String,default:"0"},needSalemanList:{type:Boolean,default:!1}},watch:{searchKeyword:function(t,e){if(0==t.length)return this.customerList=this.customerList_filter},searchKeyword_sale:function(t,e){if(0==t.length)return this.SalesmanSearch.SalesmanList=this.saleList_filter}},data:function(){return{currentFilterType:"",SalesmanSearch:{SalesmanItemText:"",SalesmanItem:{},SalesmanItemId:"",isShow:!1,SalesmanList:[]},isShowProList:!1,productTypeText:"纸板",productTypeItem:{},productType:[{type:"1",ct_Desc:"纸板"},{type:"2",ct_Desc:"纸箱"}],endYear:(0,l.default)((0,c.default)()).format("YYYY"),CustomBar:this.CustomBar,isShowCustomerList:!1,isShowSearchForm:!1,customerList:[],searchKeyword:"",searchKeyword_sale:"",customerList_filter:[],saleList_filter:[],startDate:(0,l.default)((0,c.default)()).subtract(1,"month").format("YYYY-MM-DD"),endDate:(0,l.default)((0,c.default)()).format("YYYY-MM-DD"),customerInfo:"",customerItem:{},dataType:"start"}},mounted:function(){},methods:(0,o.default)({filterCustomer:function(){var t=this;this.searchKeyword.length>0?this.customerList=this.customerList.filter(function(e){return e.ct_Desc.includes(t.searchKeyword)}):this.customerList=this.customerList_filter},filterSaleList:function(){var t=this;this.searchKeyword_sale.length>0?this.SalesmanSearch.SalesmanList=this.SalesmanSearch.SalesmanList.filter(function(e){return e.w_Name.includes(t.searchKeyword_sale)}):this.SalesmanSearch.SalesmanList=this.saleList_filter},handleFilterData:function(t){switch(this.currentFilterType=t,t){case"week":this.startDate=(0,l.default)((0,c.default)()).startOf("week").format("YYYY-MM-DD"),this.endDate=(0,l.default)((0,c.default)()).format("YYYY-MM-DD");break;case"month":this.startDate=(0,l.default)((0,c.default)()).startOf("month").format("YYYY-MM-DD"),this.endDate=(0,l.default)((0,c.default)()).format("YYYY-MM-DD");break;case"season":this.startDate=(0,l.default)((0,c.default)()).subtract(3,"month").format("YYYY-MM-DD"),this.endDate=(0,l.default)((0,c.default)()).format("YYYY-MM-DD");break}}},(0,h.mapActions)(["getSalesmanList_action","getCustomerInfo_action","getQutationCustomerList_action"]),{checkInputData:function(){var t=!0,e="";if(""==this.startDate||""==this.endDate)e="起始/结束日期必填",t=!1;else if(""!=this.startDate||""!=this.endDate){var a=this.stringToDate(this.startDate),n=this.stringToDate(this.endDate),s=(0,r.dataDiff)("d",a,n);s>730&&(e="时间间隔不能超过2年",t=!1),s<0&&(e="结束日期必须大于起始日期",t=!1)}return""!=e&&uni.showToast({title:e,icon:"none",duration:2e3}),t},stringToDate:function(t,e){e||(e="-");var a,n=t.split(e),s=(0,i.default)(n[0]);a=0==n[1].indexOf("0")?(0,i.default)(n[1].substring(1)):(0,i.default)(n[1]);var o=(0,i.default)(n[2]),c=new Date(s,a-1,o);return c},getSalesmanList:function(){var t=this;if(!(this.SalesmanSearch.SalesmanList.length>0)){var e={w_OptType:0};this.getSalesmanList_action(e).then(function(e){t.SalesmanSearch.SalesmanList=e.records,t.saleList_filter=(0,s.default)(t.SalesmanSearch.SalesmanList)}).catch(function(t){uni.showToast({title:"获取业务员列表失败 err:"+t,icon:"none",duration:2e3})})}},loadCustomerList:function(){var t=this;if(!(this.customerList.length>0)){var e={ct_Type:0};this.getQutationCustomerList_action(e).then(function(e){t.customerList=e.records,t.customerList_filter=(0,s.default)(t.customerList)}).catch(function(t){uni.showToast({title:"获取客户列表失败 err:"+t,icon:"none",duration:2e3})})}},getSalesmanInfo:function(t){this.SalesmanSearch.isShow=!1,this.SalesmanSearch.SalesmanItemText=t.w_Name,this.SalesmanSearch.SalesmanItemId=t.w_ID,this.SalesmanSearch.SalesmanItem=t},getSelectCustomerInfo:function(t){this.isShowCustomerList=!1,this.customerInfo=t.ct_Desc,this.customerItem=t},getSelectProtypeInfo:function(t){this.isShowProList=!1,this.productTypeText=t.ct_Desc,this.customerItem=t},openCustomerList:function(){this.isShowCustomerList=!0,this.loadCustomerList()},openSalesmanList:function(){this.SalesmanSearch.isShow=!0,this.getSalesmanList()},openDateSelect:function(t){this.dataType=t,this.$refs.DatePicker.show()},onConfirmDate:function(t){"start"===this.dataType?this.startDate=t.result:this.endDate=t.result},comfirmEvent:function(){if(this.checkInputData()){this.isShowSearchForm=!1;var t={ct_SalerId:this.SalesmanSearch.SalesmanItemId,startDate:this.startDate,endDate:this.endDate,ctCode:null===this.customerItem.ct_ID?"":this.customerItem.ct_ID};""==this.customerInfo&&(t.ctCode=""),this.$emit("comfirmEvent",t)}},cancelEvent:function(){this.isShowSearchForm=!1,this.$emit("cancelEvent","cancel")},open:function(){this.isShowSearchForm=!0},close:function(){this.isShowSearchForm=!1}})};e.default=d},"618d":function(t,e,a){"use strict";a.r(e);var n=a("084d"),s=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=s.a},"6da0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0},on:{searchEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.openSearchEventForm.apply(void 0,arguments)}}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("客户欠款")]),a("template",{attrs:{slot:"right"},slot:"right"},[t._v("查询")])],2),a("v-uni-view",{staticClass:"bodyContent"},[a("zTable",{attrs:{tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.dataTableList,columns:t.dataColumns},on:{onClick:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickRowEvent.apply(void 0,arguments)}}}),a("searchForm",{ref:"searchForm",on:{comfirmEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.searchComfirmEvent.apply(void 0,arguments)}}})],1)],1)},s=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})},"81cc":function(t,e,a){"use strict";a.r(e);var n=a("8fb7"),s=a("618d");for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var o=a("2877"),c=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,"62ae09ba",null);e["default"]=c.exports},"8fb7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"cu-modal bottom-modal",class:t.isShowSearchForm?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white"},[a("v-uni-view",{staticClass:"action text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelEvent.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-view",{staticClass:"action text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmEvent.apply(void 0,arguments)}}},[t._v("确定")])],1),a("v-uni-view",{staticClass:"text-left padding-sm"},[a("v-uni-form",[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("快速方式")]),a("v-uni-button",{class:"week"===t.currentFilterType?"cu-btn bg-orange":"cu-btn line-orange",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleFilterData("week")}}},[t._v("本周")]),a("v-uni-button",{class:"month"===t.currentFilterType?"cu-btn bg-orange":"cu-btn line-orange",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleFilterData("month")}}},[t._v("本月")]),a("v-uni-button",{class:"season"===t.currentFilterType?"cu-btn bg-orange":"cu-btn line-orange",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleFilterData("season")}}},[t._v("本季")])],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("开始日期")]),a("v-uni-input",{attrs:{disabled:"true",placeholder:"输入开始日期",name:"input"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDateSelect("start")}}},[t._v("日期")])],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("结束日期")]),a("v-uni-input",{attrs:{disabled:"true",placeholder:"输入框结束日期",name:"input"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDateSelect("end")}}},[t._v("日期")])],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("客　　户")]),a("v-uni-input",{attrs:{disabled:"",placeholder:"请选择客户",name:"input"},model:{value:t.customerInfo,callback:function(e){t.customerInfo=e},expression:"customerInfo"}}),a("v-uni-button",{staticClass:"margin-right cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.customerInfo=""}}},[t._v("清空")]),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCustomerList.apply(void 0,arguments)}}},[t._v("选择")])],1),t.needSalemanList?a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("业 务 员")]),a("v-uni-input",{attrs:{disabled:"",placeholder:" 请选择客户",name:"input"},model:{value:t.SalesmanSearch.SalesmanItemText,callback:function(e){t.$set(t.SalesmanSearch,"SalesmanItemText",e)},expression:"SalesmanSearch.SalesmanItemText"}}),a("v-uni-button",{staticClass:"margin-right cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SalesmanSearch.SalesmanItemText=""}}},[t._v("清空")]),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openSalesmanList.apply(void 0,arguments)}}},[t._v("选择")])],1):t._e()],1)],1)],1)],1),a("w-picker",{ref:"DatePicker",attrs:{mode:"date",startYear:"2016",endYear:t.endYear,defaultVal:[0,0,0],current:!0,themeColor:"#f00"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirmDate.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.SalesmanSearch.isShow?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.SalesmanSearch.isShow=!1}}},[a("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-bar bg-white search "},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"cuIcon-search"}),a("v-uni-input",{attrs:{type:"text",placeholder:"关键词","confirm-type":"search"},model:{value:t.searchKeyword_sale,callback:function(e){t.searchKeyword_sale=e},expression:"searchKeyword_sale"}})],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.filterSaleList()}}},[t._v("搜索")])],1)],1)],1),t._l(t.SalesmanSearch.SalesmanList,function(e,n){return a("v-uni-view",{key:n,staticClass:"cu-item arrow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getSalesmanInfo(e)}}},[a("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[a("v-uni-view",{domProps:{textContent:t._s(e.w_Name)}})],1)],1)})],2)],1)],1),a("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.isShowCustomerList?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShowCustomerList=!1}}},[a("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-bar bg-white search "},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"cuIcon-search"}),a("v-uni-input",{attrs:{type:"text",placeholder:"关键词","confirm-type":"search"},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}})],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.filterCustomer()}}},[t._v("搜索")])],1)],1)],1),t._l(t.customerList,function(e,n){return a("v-uni-view",{key:n,staticClass:"cu-item arrow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getSelectCustomerInfo(e)}}},[a("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[a("v-uni-view",{domProps:{textContent:t._s(e.ct_Desc)}})],1)],1)})],2)],1)],1),a("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.isShowProList?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShowProList=!1}}},[a("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},t._l(t.productType,function(e,n){return a("v-uni-view",{key:n,staticClass:"cu-item arrow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getSelectProtypeInfo(e)}}},[a("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[a("v-uni-view",{domProps:{textContent:t._s(e.ct_Desc)}})],1)],1)}),1)],1)],1)],1)},s=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})},"98db":function(t,e,a){"use strict";a.r(e);var n=a("f25c"),s=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=s.a},d4ea:function(t,e,a){"use strict";a.r(e);var n=a("6da0"),s=a("98db");for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);var o=a("2877"),c=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,"76e7c073",null);e["default"]=c.exports},f25c:function(t,e,a){"use strict";var n=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(a("5176")),i=n(a("f499")),o=n(a("cebc")),c=n(a("717c")),r=n(a("81cc")),l=a("2f62"),u=n(a("2464")),h={name:"SumOfCustArrears",mixins:[u.default],components:{searchForm:r.default,zTable:c.default},data:function(){return{errorContent:"数据加载中...",tableHeight:0,searchParams:{startDate:"2018-01-01",endDate:"2019-07-10",ctCode:""},dataTableList:[],dataColumns:[{key:"vnct_name",title:"客户名称",width:200,titleAlign:"left",columnAlign:"left"},{key:"init_amt",title:"期初金额",width:200,titleAlign:"right",columnAlign:"right"},{key:"de_amt",title:"送货金额",width:200,titleAlign:"right",columnAlign:"right"},{key:"am_amt",title:"收款金额",width:200,titleAlign:"right",columnAlign:"right"},{key:"amt",title:"期末额",width:200,titleAlign:"right",columnAlign:"right"}]}},mounted:function(){var t=this;this.getDataSource(),this.$nextTick(function(){t.tableHeight=t.setTableHeight(!1)})},methods:(0,o.default)({onClickRowEvent:function(t){console.log("onClickRowEvent"+(0,i.default)(t))}},(0,l.mapActions)(["getAccRAnalyzer_action"]),{searchComfirmEvent:function(t){this.searchParams=(0,s.default)(this.searchParams,t),null==this.searchParams.ctCode&&(this.searchParams.ctCode=""),this.getDataSource()},getDataSource:function(){var t=this.searchParams,e=this;this.getAccRAnalyzer_action(t).then(function(t){e.dataTableList=t,0==e.dataTableList.length&&(e.errorContent="暂无数据")}).catch(function(t){e.errorContent="暂无数据",uni.showToast({title:"查询数据失败 err"+t,icon:"none",duration:2e3})})},openSearchEventForm:function(){this.$refs.searchForm.isShowSearchForm=!0}})};e.default=h}}]);