(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-quotation-area"],{"277a":function(t,e,a){var i=a("eb85");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("090c1a99",i,!0,{sourceMap:!1,shadowMode:!1})},2872:function(t,e,a){"use strict";var i=a("277a"),n=a.n(i);n.a},"37cf":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"cu-modal bottom-modal",class:t.isShowSearchForm?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white"},[a("v-uni-view",{staticClass:"action text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelEvent.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-view",{staticClass:"action text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmEvent.apply(void 0,arguments)}}},[t._v("确定")])],1),a("v-uni-view",{staticClass:"text-left padding-sm"},[a("v-uni-form",[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("客　户"),a("v-uni-text",{staticStyle:{color:"red","margin-left":"10rpx"}},[t._v("*")])],1),a("v-uni-input",{attrs:{disabled:"",placeholder:"请选择客户",name:"input"},model:{value:t.customerInfo,callback:function(e){t.customerInfo=e},expression:"customerInfo"}}),a("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCustomerList.apply(void 0,arguments)}}},[t._v("选择")])],1),t.isBoxArea?a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("纸　　质")]),a("v-uni-input",{attrs:{placeholder:"请输入纸质",name:"input"},model:{value:t.bi_ArtID,callback:function(e){t.bi_ArtID=e},expression:"bi_ArtID"}}),a("v-uni-button",{staticClass:"cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bi_ArtID=""}}},[t._v("清空")])],1):t._e(),t.isBoxProduct?a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("产品编号")]),a("v-uni-input",{attrs:{placeholder:"请输入产品编号",name:"input"},model:{value:t.ui_UPNo,callback:function(e){t.ui_UPNo=e},expression:"ui_UPNo"}}),a("v-uni-button",{staticClass:"cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ui_UPNo=""}}},[t._v("清空")])],1):t._e(),t.isBoxProduct?a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("产品名称")]),a("v-uni-input",{attrs:{placeholder:"请输入产品名称",name:"input"},model:{value:t.ui_UPName,callback:function(e){t.ui_UPName=e},expression:"ui_UPName"}}),a("v-uni-button",{staticClass:"cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ui_UPName=""}}},[t._v("清空")])],1):t._e()],1)],1)],1)],1),a("w-picker",{ref:"DatePicker",attrs:{mode:"date",startYear:"2016",endYear:t.endYear,defaultVal:[0,0,0],current:!0,themeColor:"#f00"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirmDate.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.isShowCustomerList?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShowCustomerList=!1}}},[a("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},[a("v-uni-view",{staticClass:"cu-item"},[a("v-uni-view",{staticClass:"cu-bar bg-white search "},[a("v-uni-view",{staticClass:"search-form round"},[a("v-uni-text",{staticClass:"cuIcon-search"}),a("v-uni-input",{attrs:{type:"text",placeholder:"关键词","confirm-type":"search"},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}})],1),a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.filterCustomer()}}},[t._v("搜索")])],1)],1)],1),t._l(t.customerList,function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-item arrow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getSelectCustomerInfo(e)}}},[a("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[a("v-uni-view",{domProps:{textContent:t._s(e.ct_Desc)}})],1)],1)})],2)],1)],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"3def":function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("75fc")),s=i(a("e814"));a("28a5"),a("6762"),a("2fdb");var o=i(a("cebc")),r=i(a("0a0d")),c=a("5046"),u=i(a("dcad")),l=i(a("46c4")),h=a("2f62"),d={name:"searchForm",components:{wPicker:l.default},props:{isBoxArea:{type:Boolean,default:!1},isBoxProduct:{type:Boolean,default:!1}},watch:{searchKeyword:function(t,e){if(0==t.length)return this.customerList=this.customerList_filter}},data:function(){return{bi_ArtID:"",ui_UPName:"",ui_UPNo:"",endYear:(0,u.default)((0,r.default)()).format("YYYY"),CustomBar:this.CustomBar,isShowCustomerList:!1,isShowSearchForm:!1,customerList:[],searchKeyword:"",customerList_filter:[],startDate:(0,u.default)((0,r.default)()).subtract(1,"month").format("YYYY-MM-DD"),endDate:(0,u.default)((0,r.default)()).format("YYYY-MM-DD"),customerInfo:"",customerItem:{},dataType:"start"}},mounted:function(){},methods:(0,o.default)({filterCustomer:function(){var t=this;this.searchKeyword.length>0?this.customerList=this.customerList.filter(function(e){return e.ct_Desc.includes(t.searchKeyword)}):this.customerList=this.customerList_filter}},(0,h.mapActions)(["getQutationCustomerList_action"]),{checkInputData:function(){var t=!0,e="";if(""==this.startDate||""==this.endDate)e="起始/结束日期必填",t=!1;else if(""!=this.startDate||""!=this.endDate){var a=this.stringToDate(this.startDate),i=this.stringToDate(this.endDate),n=(0,c.dataDiff)("d",a,i);n>730&&(e="时间间隔不能超过2年",t=!1),n<0&&(e="结束日期必须大于起始日期",t=!1)}return""!=e&&uni.showToast({title:e,icon:"none",duration:2e3}),t},stringToDate:function(t,e){e||(e="-");var a,i=t.split(e),n=(0,s.default)(i[0]);a=0==i[1].indexOf("0")?(0,s.default)(i[1].substring(1)):(0,s.default)(i[1]);var o=(0,s.default)(i[2]),r=new Date(n,a-1,o);return r},loadCustomerList:function(){var t=this;if(!(this.customerList.length>0)){var e={ct_Type:"1"};this.getQutationCustomerList_action(e).then(function(e){t.customerList=e.records,t.customerList_filter=(0,n.default)(t.customerList)}).catch(function(t){uni.showToast({title:"获取客户列表失败 err:"+t,icon:"none",duration:2e3})})}},getSelectCustomerInfo:function(t){this.isShowCustomerList=!1,this.customerInfo=t.ct_Desc,this.customerItem=t},openCustomerList:function(){this.isShowCustomerList=!0,this.loadCustomerList()},openDateSelect:function(t){this.dataType=t,this.$refs.DatePicker.show()},onConfirmDate:function(t){"start"===this.dataType?this.startDate=t.result:this.endDate=t.result},comfirmEvent:function(){if(this.checkInputData()){this.isShowSearchForm=!1;var t={bi_ArtID:this.bi_ArtID,ui_UPName:this.ui_UPName,ui_UPNo:this.ui_UPNo,ctCode:null===this.customerItem.ct_ID?"":this.customerItem.ct_ID};""==this.customerInfo&&(t.ctCode=""),this.$emit("comfirmEvent",t)}},cancelEvent:function(){this.isShowSearchForm=!1,this.$emit("cancelEvent","cancel")},open:function(){this.isShowSearchForm=!0},close:function(){this.isShowSearchForm=!1}})};e.default=d},"6a50":function(t,e,a){"use strict";a.r(e);var i=a("de4b"),n=a("81f6");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("2872");var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"f34ee936",null);e["default"]=r.exports},"81f6":function(t,e,a){"use strict";a.r(e);var i=a("dca5"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},8837:function(t,e,a){"use strict";a.r(e);var i=a("37cf"),n=a("e2a6");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);var o=a("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"55397870",null);e["default"]=r.exports},dca5:function(t,e,a){"use strict";var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5176")),s=i(a("8837")),o=i(a("2464")),r=(a("2f62"),i(a("dcad")),i(a("717c"))),c={name:"paperIn",mixins:[o.default],components:{searchForm:s.default,zTable:r.default},data:function(){return{searchParams:{ctCode:""},TabCur:"0",scrollLeft:0,errorContent:"暂无数据",tableHeight:0,TableData_basePaper:[],TableData_paperQuality:[],TableData_paperParts:[],TableData_LB:[],Columns_basePaper:[{key:"OrderNo",title:"原纸编号",width:200},{key:"Station",title:"面纸单位",width:200},{key:"FNum",title:"A瓦",width:200},{key:"State",title:"C瓦",width:145},{key:"State",title:"E瓦",width:145},{key:"State",title:"E瓦",width:145},{key:"State",title:"F瓦",width:145},{key:"State",title:"G瓦",width:145},{key:"State",title:"备注",width:145}],Columns_paperQuality:[{key:"OrderNo",title:"纸质编号",width:400},{key:"Station",title:"报价",width:400}],Columns_paperParts:[{key:"OrderNo",title:"纸质",width:200},{key:"Station",title:"面纸",width:200},{key:"FNum",title:"底纸",width:200},{key:"State",title:"A坑",width:145},{key:"State",title:"B坑",width:145},{key:"State",title:"C坑",width:145},{key:"State",title:"E坑",width:145},{key:"State",title:"F坑",width:145}],Columns_LB:[{key:"OrderNo",title:"楞别",width:200},{key:"Station",title:"层次",width:200},{key:"FNum",title:"加价",width:200},{key:"State",title:"优惠方式",width:145},{key:"State",title:"折扣系数",width:145}]}},mounted:function(){},methods:{tabSelect:function(t){var e=this;this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.$nextTick(function(){setTimeout(function(){var t=e.setTableHeight();e.tableHeight=t-50},200)}),this.getDataSource()},openSearchEventForm:function(){this.$refs.searchForm.isShowSearchForm=!0},searchComfirmEvent:function(t){this.searchParams=(0,n.default)(this.searchParams,t),null==this.searchParams.ctCode&&(this.searchParams.ctCode=""),this.getDataSource()},getDataSource:function(){switch(this.TabCur){case"0":this.getQutation_basePaper();break;case"1":this.getQutation_paperQuality();break;case"2":this.getQutation_paperParts();break;case"3":this.getQutation_lb();break;default:this.getQutation_basePaper();break}},getQutation_basePaper:function(){var t=this;if(0==this.TableData_basePaper.length){var e={ct_ID:this.searchParams.ctCode};this.$store.dispatch("getQutation_basePaper_action",e).then(function(e){t.TableData_basePaper=e}).catch(function(t){uni.showToast({title:"错误:"+t,icon:"none",duration:2e3})})}},getQutation_paperQuality:function(){var t=this;if(0==this.TableData_paperQuality.length){var e={ct_ID:this.searchParams.ctCode};this.$store.dispatch("getQutation_paperQuality_action",e).then(function(e){t.TableData_paperQuality=e}).catch(function(t){uni.showToast({title:"错误:"+t,icon:"none",duration:2e3})})}},getQutation_paperParts:function(){var t=this;if(0==this.TableData_paperParts.length){var e={ct_ID:this.searchParams.ctCode};this.$store.dispatch("getQutation_paperParts_action",e).then(function(e){t.TableData_paperParts=e}).catch(function(t){uni.showToast({title:"错误:"+t,icon:"none",duration:2e3})})}},getQutation_lb:function(){var t=this;if(0==this.TableData_LB.length){var e={ct_ID:this.searchParams.ctCode};this.$store.dispatch("getQutation_lb_action",e).then(function(e){t.TableData_LB=e}).catch(function(t){uni.showToast({title:"错误:"+t,icon:"none",duration:2e3})})}}}};e.default=c},de4b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0},on:{searchEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.openSearchEventForm.apply(void 0,arguments)}}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("报价查询")]),a("template",{attrs:{slot:"right"},slot:"right"},[t._v("查询")])],2),a("v-uni-scroll-view",{staticClass:"bg-white nav",attrs:{"scroll-x":""}},[a("v-uni-view",{staticClass:"flex text-center"},[a("v-uni-view",{staticClass:"cu-item flex-sub",class:0==t.TabCur?"text-orange cur":"",attrs:{"data-id":"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v("原纸报价")]),a("v-uni-view",{staticClass:"cu-item flex-sub",class:1==t.TabCur?"text-orange cur":"",attrs:{"data-id":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v("纸质报价")]),a("v-uni-view",{staticClass:"cu-item flex-sub",class:2==t.TabCur?"text-orange cur":"",attrs:{"data-id":"2"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v("配纸加价")]),a("v-uni-view",{staticClass:"cu-item flex-sub",class:3==t.TabCur?"text-orange cur":"",attrs:{"data-id":"3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSelect.apply(void 0,arguments)}}},[t._v("楞别加价")])],1)],1),a("v-uni-form",{directives:[{name:"show",rawName:"v-show",value:0==t.TabCur,expression:"0==TabCur"}]},[a("zTable",{attrs:{tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.TableData_basePaper,columns:t.Columns_basePaper}})],1),a("v-uni-form",{directives:[{name:"show",rawName:"v-show",value:1==t.TabCur,expression:"1==TabCur"}]},[a("zTable",{attrs:{tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.TableData_paperQuality,columns:t.Columns_paperQuality}})],1),a("v-uni-form",{directives:[{name:"show",rawName:"v-show",value:2==t.TabCur,expression:"2==TabCur"}]},[a("zTable",{attrs:{tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.TableData_paperParts,columns:t.Columns_paperParts}})],1),a("v-uni-form",{directives:[{name:"show",rawName:"v-show",value:3==t.TabCur,expression:"3==TabCur"}]},[a("zTable",{attrs:{tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.TableData_LB,columns:t.Columns_LB}})],1),a("searchForm",{ref:"searchForm",on:{comfirmEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.searchComfirmEvent.apply(void 0,arguments)}}})],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},e2a6:function(t,e,a){"use strict";a.r(e);var i=a("3def"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},eb85:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".margin-text-center[data-v-f34ee936]{text-align:center;margin:%?20?%}.border-top[data-v-f34ee936]{border-top:1px solid #eee}.cu-form-group .title[data-v-f34ee936]{min-width:calc(4em + 15px)}",""])}}]);