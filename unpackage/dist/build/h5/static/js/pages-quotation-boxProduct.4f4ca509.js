(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-quotation-boxProduct"],{"37cf":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"cu-modal bottom-modal",class:t.isShowSearchForm?"show":""},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action text-blue",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelEvent.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{staticClass:"action text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comfirmEvent.apply(void 0,arguments)}}},[t._v("确定")])],1),i("v-uni-view",{staticClass:"text-left padding-sm"},[i("v-uni-form",[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("客　户"),i("v-uni-text",{staticStyle:{color:"red","margin-left":"10rpx"}},[t._v("*")])],1),i("v-uni-input",{attrs:{disabled:"",placeholder:"请选择客户",name:"input"},model:{value:t.customerInfo,callback:function(e){t.customerInfo=e},expression:"customerInfo"}}),i("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCustomerList.apply(void 0,arguments)}}},[t._v("选择")])],1),t.isBoxArea?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("纸　　质")]),i("v-uni-input",{attrs:{placeholder:"请输入纸质",name:"input"},model:{value:t.bi_ArtID,callback:function(e){t.bi_ArtID=e},expression:"bi_ArtID"}}),i("v-uni-button",{staticClass:"cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bi_ArtID=""}}},[t._v("清空")])],1):t._e(),t.isBoxProduct?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("产品编号")]),i("v-uni-input",{attrs:{placeholder:"请输入产品编号",name:"input"},model:{value:t.ui_UPNo,callback:function(e){t.ui_UPNo=e},expression:"ui_UPNo"}}),i("v-uni-button",{staticClass:"cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ui_UPNo=""}}},[t._v("清空")])],1):t._e(),t.isBoxProduct?i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("产品名称")]),i("v-uni-input",{attrs:{placeholder:"请输入产品名称",name:"input"},model:{value:t.ui_UPName,callback:function(e){t.ui_UPName=e},expression:"ui_UPName"}}),i("v-uni-button",{staticClass:"cu-btn round line-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ui_UPName=""}}},[t._v("清空")])],1):t._e()],1)],1)],1)],1),i("w-picker",{ref:"DatePicker",attrs:{mode:"date",startYear:"2016",endYear:t.endYear,defaultVal:[0,0,0],current:!0,themeColor:"#f00"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirmDate.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"cu-modal drawer-modal justify-start",class:t.isShowCustomerList?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isShowCustomerList=!1}}},[i("v-uni-view",{staticClass:"cu-dialog basis-lg",style:[{top:t.CustomBar+"px",height:"calc(100vh - "+t.CustomBar+"px)"}],on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"cu-list menu text-left",style:[{overflow:"scroll",height:"calc(100vh - "+t.CustomBar+"px)"}]},[i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-bar bg-white search "},[i("v-uni-view",{staticClass:"search-form round"},[i("v-uni-text",{staticClass:"cuIcon-search"}),i("v-uni-input",{attrs:{type:"text",placeholder:"关键词","confirm-type":"search"},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}})],1),i("v-uni-view",{staticClass:"action"},[i("v-uni-button",{staticClass:"cu-btn bg-gradual-green shadow-blur round",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.filterCustomer()}}},[t._v("搜索")])],1)],1)],1),t._l(t.customerList,function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-item arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getSelectCustomerInfo(e)}}},[i("v-uni-view",{staticClass:"content",staticStyle:{overflow:"scroll"}},[i("v-uni-view",{domProps:{textContent:t._s(e.ct_Desc)}})],1)],1)})],2)],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"3def":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("75fc")),s=a(i("e814"));i("28a5"),i("6762"),i("2fdb");var o=a(i("cebc")),r=a(i("0a0d")),u=i("5046"),c=a(i("dcad")),l=a(i("46c4")),h=i("2f62"),d={name:"searchForm",components:{wPicker:l.default},props:{isBoxArea:{type:Boolean,default:!1},isBoxProduct:{type:Boolean,default:!1}},watch:{searchKeyword:function(t,e){if(0==t.length)return this.customerList=this.customerList_filter}},data:function(){return{bi_ArtID:"",ui_UPName:"",ui_UPNo:"",endYear:(0,c.default)((0,r.default)()).format("YYYY"),CustomBar:this.CustomBar,isShowCustomerList:!1,isShowSearchForm:!1,customerList:[],searchKeyword:"",customerList_filter:[],startDate:(0,c.default)((0,r.default)()).subtract(1,"month").format("YYYY-MM-DD"),endDate:(0,c.default)((0,r.default)()).format("YYYY-MM-DD"),customerInfo:"",customerItem:{},dataType:"start"}},mounted:function(){},methods:(0,o.default)({filterCustomer:function(){var t=this;this.searchKeyword.length>0?this.customerList=this.customerList.filter(function(e){return e.ct_Desc.includes(t.searchKeyword)}):this.customerList=this.customerList_filter}},(0,h.mapActions)(["getQutationCustomerList_action"]),{checkInputData:function(){var t=!0,e="";if(""==this.startDate||""==this.endDate)e="起始/结束日期必填",t=!1;else if(""!=this.startDate||""!=this.endDate){var i=this.stringToDate(this.startDate),a=this.stringToDate(this.endDate),n=(0,u.dataDiff)("d",i,a);n>730&&(e="时间间隔不能超过2年",t=!1),n<0&&(e="结束日期必须大于起始日期",t=!1)}return""!=e&&uni.showToast({title:e,icon:"none",duration:2e3}),t},stringToDate:function(t,e){e||(e="-");var i,a=t.split(e),n=(0,s.default)(a[0]);i=0==a[1].indexOf("0")?(0,s.default)(a[1].substring(1)):(0,s.default)(a[1]);var o=(0,s.default)(a[2]),r=new Date(n,i-1,o);return r},loadCustomerList:function(){var t=this;if(!(this.customerList.length>0)){var e={ct_Type:"1"};this.getQutationCustomerList_action(e).then(function(e){t.customerList=e.records,t.customerList_filter=(0,n.default)(t.customerList)}).catch(function(t){uni.showToast({title:"获取客户列表失败 err:"+t,icon:"none",duration:2e3})})}},getSelectCustomerInfo:function(t){this.isShowCustomerList=!1,this.customerInfo=t.ct_Desc,this.customerItem=t},openCustomerList:function(){this.isShowCustomerList=!0,this.loadCustomerList()},openDateSelect:function(t){this.dataType=t,this.$refs.DatePicker.show()},onConfirmDate:function(t){"start"===this.dataType?this.startDate=t.result:this.endDate=t.result},comfirmEvent:function(){if(this.checkInputData()){this.isShowSearchForm=!1;var t={bi_ArtID:this.bi_ArtID,ui_UPName:this.ui_UPName,ui_UPNo:this.ui_UPNo,ctCode:null===this.customerItem.ct_ID?"":this.customerItem.ct_ID};""==this.customerInfo&&(t.ctCode=""),this.$emit("comfirmEvent",t)}},cancelEvent:function(){this.isShowSearchForm=!1,this.$emit("cancelEvent","cancel")},open:function(){this.isShowSearchForm=!0},close:function(){this.isShowSearchForm=!1}})};e.default=d},"48ab":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".margin-text-center[data-v-e620f540]{text-align:center;margin:%?20?%}.border-top[data-v-e620f540]{border-top:1px solid #eee}.cu-form-group .title[data-v-e620f540]{min-width:calc(4em + 15px)}",""])},"7f42":function(t,e,i){var a=i("48ab");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("c2734244",a,!0,{sourceMap:!1,shadowMode:!1})},8837:function(t,e,i){"use strict";i.r(e);var a=i("37cf"),n=i("e2a6");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);var o=i("2877"),r=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"55397870",null);e["default"]=r.exports},8952:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0},on:{searchEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.openSearchEventForm.apply(void 0,arguments)}}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸箱产品报价")]),i("template",{attrs:{slot:"right"},slot:"right"},[t._v("查询")])],2),i("v-uni-form",{directives:[{name:"show",rawName:"v-show",value:0==t.TabCur,expression:"0==TabCur"}]},[i("zTable",{attrs:{showPaging:!0,pageSetting:t.pageSetting,tableHeight:t.tableHeight,showLoading:!1,emptyText:t.errorContent,tableData:t.TableData_boxProduct,columns:t.Columns_boxProduct},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.pageChange.apply(void 0,arguments)}}})],1),i("searchForm",{ref:"searchForm",attrs:{isBoxProduct:!0},on:{comfirmEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.searchComfirmEvent.apply(void 0,arguments)}}})],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},a040:function(t,e,i){"use strict";i.r(e);var a=i("e5c4"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},b5c9:function(t,e,i){"use strict";var a=i("7f42"),n=i.n(a);n.a},e101:function(t,e,i){"use strict";i.r(e);var a=i("8952"),n=i("a040");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("b5c9");var o=i("2877"),r=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"e620f540",null);e["default"]=r.exports},e2a6:function(t,e,i){"use strict";i.r(e);var a=i("3def"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},e5c4:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("5176")),s=a(i("8837")),o=a(i("2464")),r=(i("2f62"),a(i("dcad")),a(i("717c"))),u={name:"paperIn",mixins:[o.default],components:{searchForm:s.default,zTable:r.default},data:function(){return{searchParams:{ctCode:"",up_CustID:"",ui_UPNo:"",ui_UPName:""},TabCur:"0",scrollLeft:0,errorContent:"暂无数据",tableHeight:0,TableData_boxProduct:[],Columns_boxProduct:[{key:"ct_Desc",title:"客户名称",width:200},{key:"ui_UPNo",title:"产品编号",width:200},{key:"ui_UPName",title:"产品名称",width:400},{key:"ui_Price",title:"报价",width:200},{key:"up_StartDate",title:"生效日期",width:200},{key:"Csize",title:"规格",width:400}]}},mounted:function(){},methods:{pageChange:function(t){this.pageSetting.current=t,this.getDataSource()},tabSelect:function(t){var e=this;this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1),this.$nextTick(function(){setTimeout(function(){var t=e.setTableHeight();e.tableHeight=t-50},200)}),this.getDataSource()},openSearchEventForm:function(){this.$refs.searchForm.isShowSearchForm=!0},searchComfirmEvent:function(t){this.searchParams=(0,n.default)(this.searchParams,t),null==this.searchParams.ctCode&&(this.searchParams.ctCode=""),null==this.searchParams.up_CustID&&(this.searchParams.up_CustID=""),null==this.searchParams.ui_UPNo&&(this.searchParams.ui_UPNo=""),null==this.searchParams.ui_UPName&&(this.searchParams.ui_UPName=""),this.getDataSource()},getDataSource:function(){switch(this.TabCur){case"0":this.getQutation_boxProduct();break;default:this.getQutation_boxProduct();break}},getQutation_boxProduct:function(){var t=this,e={up_CustID:this.searchParams.ctCode,ui_UPNo:this.searchParams.ui_UPNo,ui_UPName:this.searchParams.ui_UPName,size:this.pageSetting.pageSize,current:this.pageSetting.current};this.$store.dispatch("getQutation_products_action",e).then(function(e){t.TableData_boxProduct=e.data.records}).catch(function(t){uni.showToast({title:"错误:"+t,icon:"none",duration:2e3})})}}};e.default=u}}]);