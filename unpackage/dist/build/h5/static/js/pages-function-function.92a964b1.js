(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-function-function"],{2464:function(t,e,n){"use strict";var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("e814"));n("28a5");var r=a(n("795b")),o=a(n("7e00")),u={name:"mixin-base",data:function(){return{pageSetting:{current:1,pageSize:15,total:0},pageTitle:"",otherHeight:0,leftContentHeight:0}},computed:{menuList:function(){var t=this.$store.getters.menuList_getters;return t}},methods:{getOtherContentHeight:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new r.default(function(n,a){var i=t,r=uni.createSelectorQuery().select("."+e);r.boundingClientRect(function(t){console.log("other Height:"+t.height),i.otherHeight=t.height,t.height,n(t.height)}).exec(function(t){})})},setTableHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.otherHeight=0);try{var e=uni.getSystemInfoSync();return console.log("CustomBar:"+this.CustomBar),this.leftContentHeight=e.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(n){}},getImgUrl:function(t){return o.default.baseImgUrl+t},formatData:function(t){return null==t?"":this.stringToDate(t).format("yyyy-MM-dd")},stringToDate:function(t,e){e||(e="-");var n,a=t.split(e),r=(0,i.default)(a[0]);n=0===a[1].indexOf("0")?(0,i.default)(a[1].substring(1)):(0,i.default)(a[1]);var o=(0,i.default)(a[2]),u=new Date(r,n-1,o);return u},checkLogin:function(){var t=uni.getStorageSync("TOKEN");if(null==t||""===t||null==this.menuList||0===this.menuList.length)try{uni.reLaunch({url:"/pages/login/login"})}catch(e){}}},onLoad:function(){this.checkLogin()},mounted:function(){}};e.default=u},"3fcf":function(t,e,n){"use strict";n.r(e);var a=n("bd00"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=i.a},"43eb":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!1}},[n("template",{attrs:{slot:"content"},slot:"content"},[t._v("功能")])],2),t._l(t.allMenuList.function,function(e,a){return[n("v-uni-view",{key:a+"_0",staticClass:"grid-warp"},[n("v-uni-view",{staticClass:"grid-title"},[t._v(t._s(e.title))]),n("v-uni-view",{staticClass:"grid-body"},[n("v-uni-view",{staticClass:"cu-list grid col-3 no-border"},[t._l(e.children,function(e,a){return[n("v-uni-view",{key:a+"_0",staticClass:"cu-item",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.turnToPage(e.data.resLink,a)}}},[n("v-uni-image",{staticClass:"image",attrs:{src:t.getImgUrl(e.data.resIcon),mode:"aspectFill"}}),null!=e.data.resNotice&&e.data.resNotice.length>0?n("v-uni-view",{staticClass:"cu-tag badge",staticStyle:{"padding-top":"2px"}},[[t._v(t._s(t.getNotice(a,e.data.resNotice)))],[t._v(t._s(Number(e.data.resAuthMark)))]],2):t._e(),n("v-uni-text",{staticClass:"text"},[t._v(t._s(e.title))])],1)]})],2)],1)],1)]})],2)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},"491c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReLoadData=e.BackToPage_Refresh=void 0;var a="BACKTOPAGE_REFRESH";e.BackToPage_Refresh=a;var i="ReLoadData";e.ReLoadData=i},bd00:function(t,e,n){"use strict";var a=n("e54b"),i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac6a"),n("6762"),n("2fdb"),n("c5f6");var r=i(n("5176")),o=a(n("491c")),u=(n("2f62"),i(n("2464"))),s={name:"functionMenu",mixins:[u.default],data:function(){return{hasUpdate:!1,notify_num:88,allMenuList:[]}},mounted:function(){this.allMenuList=(0,r.default)({},this.menuList);var t=this;uni.$on(o.ReLoadData,function(e){e.needToUpdate&&t.updateNotifyNum()})},methods:{navigateTo:function(t){uni.navigateTo({url:t})},getNotice:function(t,e){if(!(e.length<10||this.hasUpdate)){var n={url:e},a=this;this.$store.dispatch("getNoticeInfoAction",n).then(function(e){if(console.log("getNoticeInfoAction:"+e.data),a.hasUpdate=!0,Number(e.data)>0){var n={resAuthMark:e.data};a.allMenuList.function[0].children[t].data=(0,r.default)({},a.allMenuList.function[0].children[t].data,n)}}).catch(function(t){a.hasUpdate=!0,uni.showToast({title:"获取NoticeInfo失败:"+t,icon:"none",duration:2e3})})}},turnToPage:function(t,e){if(this.remarkIndex(e),t.includes("/pages"))uni.navigateTo({url:t});else switch(t){case"zx":uni.navigateTo({url:"/pages/verify/boxApproval/boxApproval"});break;case"tax":uni.navigateTo({url:"/pages/verify/bargainPrice/bargainPrice"});break;case"material":uni.navigateTo({url:"../verify/material/material"});break;case"purchases":uni.navigateTo({url:"../verify/originalPaper/originalPaper"});break;case"paperIn":uni.navigateTo({url:"../warehouse/paperIn/paperIn"});break;case"boxIn":uni.navigateTo({url:"../warehouse/boxIn/boxIn"});break;case"paperOB":uni.navigateTo({url:"../warehouse/paperOB/paperOB"});break;default:uni.showToast({title:"找不到指定路径，请确认！"+t,icon:"none",duration:2e3});break}},remarkIndex:function(t){this.$store.commit("setSubIndex",t)},updateNotifyNum:function(){var t=this;this.allMenuList.function.forEach(function(e){e.children.forEach(function(e,n){t.hasUpdate=!1,console.log("==="+e.data.resNotice),t.getNotice(n,e.data.resNotice)})})}}};e.default=s},e54b:function(t,e,n){var a=n("268f"),i=n("85f2");function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=i&&a?a(t,n):{};r.get||r.set?i(e,n,r):e[n]=t[n]}return e.default=t,e}t.exports=r},ffec:function(t,e,n){"use strict";n.r(e);var a=n("43eb"),i=n("3fcf");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);var o=n("2877"),u=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,"21e8eeab",null);e["default"]=u.exports}}]);